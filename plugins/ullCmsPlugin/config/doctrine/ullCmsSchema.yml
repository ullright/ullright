# Common base for menu items and pages
UllCmsItem:
  package: ullCmsPlugin.lib.model.doctrine
  inheritance:
    extends: UllRecord
    type: concrete
  actAs:
    I18n:
      fields: [name, title, body] 
    Sluggable:
      unique: true
      fields: [name]
  columns:
    name:
      type: string(128)
      notnull: true  
    parent_ull_cms_item_id:
      type: integer
    allow_sub_items:
      type: boolean
      default: true
    sequence:
      integer
      
    # Child columns are defined here, because mixing parent and child translations
    # (i18n behavior) does not work
      
    # menu_item columns
    link:
      type: string(128)
      
    # page columns
    title:
      type: string(255)
      notnull: true
    body:
      type: clob
      notnull: true
  relations:      
    Parent:
      class: UllCmsItem
      local: parent_ull_cms_item_id
      foreign: id
  

# Menu items
UllCmsMenuItem:
  package: ullCmsPlugin.lib.model.doctrine
  inheritance:
    extends: UllCmsItem
    type: column_aggregation
    keyValue: menu_item


# Content pages
UllCmsPage:
  package: ullCmsPlugin.lib.model.doctrine
  inheritance:
    extends: UllCmsItem
    type: column_aggregation
    keyValue: page

    
# Frontpage news entries
UllNews:
  package: ullCmsPlugin.lib.model.doctrine
  inheritance:
    extends: UllRecord
    type: concrete
  actAs:
    I18n:
      fields: [title, abstract]
    Sluggable:
      unique: true
      fields: [title]
  columns:
    title:
      type: string(255)
      notnull: true
    abstract:
      type: string(4000)
      notnull: true
    link_name:
      type: string(255)
    link_url:
      type: string(255)
    image_upload:
      type: string(255)
    activation_date:
      type: date
    deactivation_date:
      type: date