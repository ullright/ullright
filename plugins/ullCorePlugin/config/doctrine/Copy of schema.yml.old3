# base table definition which is inherited by all tables
UllRecord:
  package: ullCorePlugin.lib.model.doctrine
  actAs:
    Timestampable:
      created:
        name: created_at
        type: timestamp
      updated:
        name: updated_at
        type: timestamp
  columns:
    namespace:
      type: string(32)
      default: ullCore
    creator_user_id: 
      type: integer
      default: 1        #masteradmin
    updator_user_id: 
      type: integer
      default: 1        #masteradmin
  relations:
    Creator:
      class: User
      local: creator_user_id
      foreign: id
    Updator:
      class: User
      local: updator_user_id
      foreign: id

# user and groups
Entity:
  inheritance: 
    extends: UllRecord
    type: concrete
  tableName: ull_entity
  columns:
    name:
      type: string(64)  
    email: 
      type: string(64)

User:
  inheritance:
    extends: Entity
    type: columns_aggregation
    keyField: type
    keyValue: user
  package: ullCorePlugin.lib.model.doctrine      
  columns:
    first_name: 
      type: string(64)
    last_name: 
      type: string(64)
    username: 
      type: string(32)
    password: 
      type: string(40)
    location_id: 
      type: integer
    user_type: 
      type: integer
    birthday: 
      type: date            
  relations:
    Group:
      refClass: EntityGroup
      local: entity_id
      foreign: group_id

Group:
  inheritance:
    extends: Entity
    type: columns_aggregation
    keyField: type
    keyValue: group
  package: ullCorePlugin.lib.model.doctrine    

EntityGroup:
  inheritance:
    extends: UllRecord
    type: concrete
  tableName: ull_entity_group
  package: ullCorePlugin.lib.model.doctrine
  columns:
    entity_id:
      type: integer
      primary: true
    group_id:
      type: integer
      primary: true      