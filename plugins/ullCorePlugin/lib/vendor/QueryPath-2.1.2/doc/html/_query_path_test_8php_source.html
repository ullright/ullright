<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>QueryPath: test/Tests/QueryPath/QueryPathTest.php Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">QueryPath
   &#160;<span id="projectnumber">2.1.2</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_query_path_test_8php.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">test/Tests/QueryPath/QueryPathTest.php</div>  </div>
</div>
<div class="contents">
<a href="_query_path_test_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php<span class="comment"></span>
<a name="l00002"></a>00002 <span class="comment">/** @file</span>
<a name="l00003"></a>00003 <span class="comment"> * Tests for the QueryPath library.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * </span>
<a name="l00006"></a>00006 <span class="comment"> * @author M Butcher &lt;matt@aleph-null.tv&gt;</span>
<a name="l00007"></a>00007 <span class="comment"> * @license The GNU Lesser GPL (LGPL) or an MIT-like license.</span>
<a name="l00008"></a>00008 <span class="comment"> */</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">/** @addtogroup querypath_tests Tests</span>
<a name="l00011"></a>00011 <span class="comment"> * Unit tests and regression tests for QueryPath.</span>
<a name="l00012"></a>00012 <span class="comment"> */</span>
<a name="l00013"></a>00013 
<a name="l00014"></a><a class="code" href="_query_path_test_8php.html#aaa31838e86513cb3a51e398894ee4b35">00014</a> <a class="code" href="_query_path_test_8php.html#aaa31838e86513cb3a51e398894ee4b35">$basedir</a> = dirname(__FILE__);
<a name="l00015"></a>00015 <span class="comment"></span>
<a name="l00016"></a>00016 <span class="comment">/** */</span>
<a name="l00017"></a>00017 require_once <span class="stringliteral">&#39;PHPUnit/Autoload.php&#39;</span>;
<a name="l00018"></a>00018 require_once <a class="code" href="_query_path_test_8php.html#aaa31838e86513cb3a51e398894ee4b35">$basedir</a> . <span class="stringliteral">&#39;/../../../src/QueryPath/QueryPath.php&#39;</span>;
<a name="l00019"></a>00019 
<a name="l00020"></a><a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">00020</a> define(<span class="stringliteral">&#39;DATA_FILE&#39;</span>, <a class="code" href="_query_path_test_8php.html#aaa31838e86513cb3a51e398894ee4b35">$basedir</a> . <span class="stringliteral">&#39;/../../data.xml&#39;</span>);
<a name="l00021"></a><a class="code" href="_query_path_test_8php.html#ab62f82abe10f3b01ebefd2a2ef31cf87">00021</a> define(<span class="stringliteral">&#39;DATA_HTML_FILE&#39;</span>, <a class="code" href="_query_path_test_8php.html#aaa31838e86513cb3a51e398894ee4b35">$basedir</a> . <span class="stringliteral">&#39;/../../data.html&#39;</span>);
<a name="l00022"></a><a class="code" href="_query_path_test_8php.html#a5189b607478e7c35aaa0accc1ee8a0b4">00022</a> define(<span class="stringliteral">&#39;NO_WRITE_FILE&#39;</span>, <a class="code" href="_query_path_test_8php.html#aaa31838e86513cb3a51e398894ee4b35">$basedir</a> . <span class="stringliteral">&#39;/../../no-write.xml&#39;</span>);
<a name="l00023"></a><a class="code" href="_query_path_test_8php.html#a7398a01d613ef995beca17ea2e110316">00023</a> define(<span class="stringliteral">&#39;MEDIUM_FILE&#39;</span>, <a class="code" href="_query_path_test_8php.html#aaa31838e86513cb3a51e398894ee4b35">$basedir</a> . <span class="stringliteral">&#39;/../../amplify.xml&#39;</span>);
<a name="l00024"></a><a class="code" href="_query_path_test_8php.html#a943554a37a206f9ba0998b96a6f3df75">00024</a> define(<span class="stringliteral">&#39;HTML_IN_XML_FILE&#39;</span>, <a class="code" href="_query_path_test_8php.html#aaa31838e86513cb3a51e398894ee4b35">$basedir</a> . <span class="stringliteral">&#39;/../../html.xml&#39;</span>);
<a name="l00025"></a>00025 <span class="comment"></span>
<a name="l00026"></a>00026 <span class="comment">/**</span>
<a name="l00027"></a>00027 <span class="comment"> * Tests for DOM Query. Primarily, this is focused on the DomQueryImpl</span>
<a name="l00028"></a>00028 <span class="comment"> * class which is exposed through the DomQuery interface and the dq() </span>
<a name="l00029"></a>00029 <span class="comment"> * factory function.</span>
<a name="l00030"></a>00030 <span class="comment"> * @ingroup querypath_tests</span>
<a name="l00031"></a>00031 <span class="comment"> */</span>
<a name="l00032"></a><a class="code" href="class_query_path_test.html">00032</a> <span class="keyword">class </span><a class="code" href="class_query_path_test.html" title="Tests for DOM Query.">QueryPathTest</a> <span class="keyword">extends</span> PHPUnit_Framework_TestCase {
<a name="l00033"></a>00033   
<a name="l00034"></a><a class="code" href="class_query_path_test.html#a51f7b5ed8d4a3883fabb10c08c5e90a8">00034</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a51f7b5ed8d4a3883fabb10c08c5e90a8">testQueryPathConstructors</a>() {
<a name="l00035"></a>00035     
<a name="l00036"></a>00036     <span class="comment">// From XML file</span>
<a name="l00037"></a>00037     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00038"></a>00038     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>);
<a name="l00039"></a>00039     $this-&gt;assertEquals(1, count(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get()));
<a name="l00040"></a>00040     $this-&gt;assertTrue(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0) instanceof DOMNode);
<a name="l00041"></a>00041     
<a name="l00042"></a>00042     <span class="comment">// From XML file with context</span>
<a name="l00043"></a>00043     <a class="code" href="dbpedia_8php.html#ab8dcbed10863cd3734ef850387337cf4">$cxt</a> = stream_context_create();
<a name="l00044"></a>00044     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, NULL, array(<span class="stringliteral">&#39;context&#39;</span> =&gt; $cxt));
<a name="l00045"></a>00045     $this-&gt;assertEquals(1, count(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get()));
<a name="l00046"></a>00046     $this-&gt;assertTrue(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0) instanceof DOMNode);
<a name="l00047"></a>00047     
<a name="l00048"></a>00048     <span class="comment">// From XML string</span>
<a name="l00049"></a>00049     <a class="code" href="test_8php.html#a7542d95618011800c61773127fa625cf">$str</a> = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot; ?&gt;&lt;root&gt;&lt;inner/&gt;&lt;/root&gt;&#39;</span>;
<a name="l00050"></a>00050     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($str);
<a name="l00051"></a>00051     $this-&gt;assertEquals(1, count(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get()));
<a name="l00052"></a>00052     $this-&gt;assertTrue(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0) instanceof DOMNode);
<a name="l00053"></a>00053     
<a name="l00054"></a>00054     <span class="comment">// From SimpleXML</span>
<a name="l00055"></a>00055     $str = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot; ?&gt;&lt;root&gt;&lt;inner/&gt;&lt;/root&gt;&#39;</span>;    
<a name="l00056"></a>00056     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(simplexml_load_string($str));
<a name="l00057"></a>00057     $this-&gt;assertEquals(1, count(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get()));
<a name="l00058"></a>00058     $this-&gt;assertTrue(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0) instanceof DOMNode);
<a name="l00059"></a>00059     
<a name="l00060"></a>00060     <span class="comment">// Test from DOMDocument</span>
<a name="l00061"></a>00061     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(DOMDocument::loadXML($str));
<a name="l00062"></a>00062     $this-&gt;assertEquals(1, count($qp-&gt;get()));
<a name="l00063"></a>00063     $this-&gt;assertTrue($qp-&gt;get(0) instanceof DOMNode);
<a name="l00064"></a>00064     
<a name="l00065"></a>00065     <span class="comment">// Now with a selector:</span>
<a name="l00066"></a>00066     $qp = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#head&#39;</span>);
<a name="l00067"></a>00067     $this-&gt;assertEquals(1, count($qp-&gt;get()));
<a name="l00068"></a>00068     $this-&gt;assertEquals($qp-&gt;get(0)-&gt;tagName, <span class="stringliteral">&#39;head&#39;</span>);
<a name="l00069"></a>00069     
<a name="l00070"></a>00070     <span class="comment">// Test HTML:</span>
<a name="l00071"></a>00071     $htmlFile = <a class="code" href="_query_path_test_8php.html#ab62f82abe10f3b01ebefd2a2ef31cf87">DATA_HTML_FILE</a>;
<a name="l00072"></a>00072     $qp = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($htmlFile);
<a name="l00073"></a>00073     $this-&gt;assertEquals(1, count($qp-&gt;get()));
<a name="l00074"></a>00074     $this-&gt;assertTrue($qp-&gt;get(0) instanceof DOMNode);
<a name="l00075"></a>00075     
<a name="l00076"></a>00076     <span class="comment">// Test with another QueryPath</span>
<a name="l00077"></a>00077     $qp = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($qp);
<a name="l00078"></a>00078     $this-&gt;assertEquals(1, count($qp-&gt;get()));
<a name="l00079"></a>00079     $this-&gt;assertTrue($qp-&gt;get(0) instanceof DOMNode);
<a name="l00080"></a>00080     
<a name="l00081"></a>00081     <span class="comment">// Test from array of DOMNodes</span>
<a name="l00082"></a>00082     $array = $qp-&gt;get();
<a name="l00083"></a>00083     $qp = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($array);
<a name="l00084"></a>00084     $this-&gt;assertEquals(1, count($qp-&gt;get()));
<a name="l00085"></a>00085     $this-&gt;assertTrue($qp-&gt;get(0) instanceof DOMNode);
<a name="l00086"></a>00086     
<a name="l00087"></a>00087   }<span class="comment"></span>
<a name="l00088"></a>00088 <span class="comment">  /**</span>
<a name="l00089"></a>00089 <span class="comment">   * Test alternate constructors.</span>
<a name="l00090"></a>00090 <span class="comment">   */</span>
<a name="l00091"></a><a class="code" href="class_query_path_test.html#a28c993c1735eb653c21a08a5b71bda7a">00091</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a28c993c1735eb653c21a08a5b71bda7a" title="Test alternate constructors.">testQueryPathHtmlConstructors</a>() {
<a name="l00092"></a>00092     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaf57e48b69cb3da60c06492dadd986e8f" title="A special-purpose version of qp() designed specifically for HTML.">htmlqp</a>(<a class="code" href="class_query_path.html#a5728576905f79bc6dfdfad6aad326aed" title="This is a stub HTML 4.01 document.">QueryPath::HTML_STUB</a>);
<a name="l00093"></a>00093     $this-&gt;assertEquals(1, count(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get()));
<a name="l00094"></a>00094     $this-&gt;assertTrue(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0) instanceof DOMNode);
<a name="l00095"></a>00095     
<a name="l00096"></a>00096     <span class="comment">// Bad BR tag.</span>
<a name="l00097"></a>00097     $borken = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;br&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l00098"></a>00098     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaf57e48b69cb3da60c06492dadd986e8f" title="A special-purpose version of qp() designed specifically for HTML.">htmlqp</a>($borken);
<a name="l00099"></a>00099     $this-&gt;assertEquals(1, count(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get()));
<a name="l00100"></a>00100     $this-&gt;assertTrue(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0) instanceof DOMNode);
<a name="l00101"></a>00101     
<a name="l00102"></a>00102     <span class="comment">// XHTML Faker</span>
<a name="l00103"></a>00103     $borken = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;br&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l00104"></a>00104     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaf57e48b69cb3da60c06492dadd986e8f" title="A special-purpose version of qp() designed specifically for HTML.">htmlqp</a>($borken);
<a name="l00105"></a>00105     $this-&gt;assertEquals(1, count(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get()));
<a name="l00106"></a>00106     $this-&gt;assertTrue(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0) instanceof DOMNode);
<a name="l00107"></a>00107     
<a name="l00108"></a>00108     <span class="comment">// HTML in a file that looks like XML.</span>
<a name="l00109"></a>00109     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaf57e48b69cb3da60c06492dadd986e8f" title="A special-purpose version of qp() designed specifically for HTML.">htmlqp</a>(<a class="code" href="_query_path_test_8php.html#a943554a37a206f9ba0998b96a6f3df75">HTML_IN_XML_FILE</a>);
<a name="l00110"></a>00110     $this-&gt;assertEquals(1, count($qp-&gt;get()));
<a name="l00111"></a>00111     $this-&gt;assertTrue($qp-&gt;get(0) instanceof DOMNode);
<a name="l00112"></a>00112     
<a name="l00113"></a>00113     <span class="comment">// Stripping #13 (CR) from HTML.</span>
<a name="l00114"></a>00114     $borken = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;&#39;</span> . chr(13) . <span class="stringliteral">&#39;&lt;/p&gt;&lt;div id=&quot;after&quot;/&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l00115"></a>00115     $this-&gt;assertFalse(strpos(<a class="code" href="group__querypath__core.html#gaf57e48b69cb3da60c06492dadd986e8f" title="A special-purpose version of qp() designed specifically for HTML.">htmlqp</a>($borken)-&gt;html(), <span class="stringliteral">&#39;&amp;#13;&#39;</span>), <span class="stringliteral">&#39;Test that CRs are not encoded.&#39;</span>);
<a name="l00116"></a>00116     
<a name="l00117"></a>00117     <span class="comment">// Regression for #58: Make sure we aren&#39;t getting &amp;#10; encoded.</span>
<a name="l00118"></a>00118     $borken = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;style&gt;</span>
<a name="l00119"></a>00119 <span class="stringliteral">        .BlueText {</span>
<a name="l00120"></a>00120 <span class="stringliteral">          color:red;</span>
<a name="l00121"></a>00121 <span class="stringliteral">        }&lt;/style&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l00122"></a>00122         
<a name="l00123"></a>00123     $this-&gt;assertFalse(strpos(<a class="code" href="group__querypath__core.html#gaf57e48b69cb3da60c06492dadd986e8f" title="A special-purpose version of qp() designed specifically for HTML.">htmlqp</a>($borken)-&gt;html(), <span class="stringliteral">&#39;&amp;#10;&#39;</span>), <span class="stringliteral">&#39;Test that LF is not encoded.&#39;</span>);
<a name="l00124"></a>00124     
<a name="l00125"></a>00125     <span class="comment">// Low ASCII in a file</span>
<a name="l00126"></a>00126     $borken = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;&#39;</span> . chr(27) . <span class="stringliteral">&#39;&lt;/p&gt;&lt;div id=&quot;after&quot;/&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l00127"></a>00127     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaf57e48b69cb3da60c06492dadd986e8f" title="A special-purpose version of qp() designed specifically for HTML.">htmlqp</a>($borken, <span class="stringliteral">&#39;#after&#39;</span>)-&gt;size());
<a name="l00128"></a>00128   }
<a name="l00129"></a>00129   
<a name="l00130"></a><a class="code" href="class_query_path_test.html#a52bcecd484596d7fd7040d40023ba9f7">00130</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a52bcecd484596d7fd7040d40023ba9f7">testForTests</a>() {
<a name="l00131"></a>00131     $qp_methods = get_class_methods(<span class="stringliteral">&#39;QueryPath&#39;</span>);
<a name="l00132"></a>00132     $test_methods = get_class_methods(<span class="stringliteral">&#39;QueryPathTest&#39;</span>);
<a name="l00133"></a>00133     
<a name="l00134"></a>00134     $ignore = array(<span class="stringliteral">&quot;__construct&quot;</span>, <span class="stringliteral">&quot;__call&quot;</span>, <span class="stringliteral">&quot;__clone&quot;</span>, <span class="stringliteral">&quot;get&quot;</span>, <span class="stringliteral">&quot;getOptions&quot;</span>, <span class="stringliteral">&quot;setMatches&quot;</span>, <span class="stringliteral">&quot;toArray&quot;</span>, <span class="stringliteral">&quot;getIterator&quot;</span>);
<a name="l00135"></a>00135     
<a name="l00136"></a>00136     $test_methods = array_map(<span class="stringliteral">&#39;strtolower&#39;</span>, $test_methods);
<a name="l00137"></a>00137      
<a name="l00138"></a>00138     <span class="keywordflow">foreach</span>($qp_methods as $q) {
<a name="l00139"></a>00139       <span class="keywordflow">if</span>(in_array($q, $ignore)) <span class="keywordflow">continue</span>;
<a name="l00140"></a>00140       $this-&gt;assertTrue(in_array(strtolower(<span class="stringliteral">&quot;test&quot;</span>.$q), $test_methods), $q . <span class="stringliteral">&#39; does not have a test method.&#39;</span>);
<a name="l00141"></a>00141     }
<a name="l00142"></a>00142   }
<a name="l00143"></a>00143   
<a name="l00144"></a><a class="code" href="class_query_path_test.html#ace7ad865d9dacffe02383c77797325d7">00144</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ace7ad865d9dacffe02383c77797325d7">testOptionXMLEncoding</a>() {
<a name="l00145"></a>00145     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(NULL, NULL, array(<span class="stringliteral">&#39;encoding&#39;</span> =&gt; <span class="stringliteral">&#39;iso-8859-1&#39;</span>))-&gt;append(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;xml();
<a name="l00146"></a>00146     $iso_found = preg_match(<span class="stringliteral">&#39;/iso-8859-1/&#39;</span>, $xml) == 1;
<a name="l00147"></a>00147     
<a name="l00148"></a>00148     $this-&gt;assertTrue($iso_found, <span class="stringliteral">&#39;Encoding should be iso-8859-1 in &#39;</span> . $xml . <span class="stringliteral">&#39;Found &#39;</span> . $iso_found);
<a name="l00149"></a>00149     
<a name="l00150"></a>00150     $iso_found = preg_match(<span class="stringliteral">&#39;/utf-8/&#39;</span>, $xml) == 1;
<a name="l00151"></a>00151     $this-&gt;assertFalse($iso_found, <span class="stringliteral">&#39;Encoding should not be utf-8 in &#39;</span> . $xml);
<a name="l00152"></a>00152     
<a name="l00153"></a>00153     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;test/&gt;&#39;</span>, NULL, array(<span class="stringliteral">&#39;encoding&#39;</span> =&gt; <span class="stringliteral">&#39;iso-8859-1&#39;</span>))-&gt;xml();
<a name="l00154"></a>00154     $iso_found = preg_match(<span class="stringliteral">&#39;/utf-8/&#39;</span>, $xml) == 1;
<a name="l00155"></a>00155     $this-&gt;assertTrue($iso_found, <span class="stringliteral">&#39;Encoding should be utf-8 in &#39;</span> . $xml);
<a name="l00156"></a>00156     
<a name="l00157"></a>00157     $iso_found = preg_match(<span class="stringliteral">&#39;/iso-8859-1/&#39;</span>, $xml) == 1;
<a name="l00158"></a>00158     $this-&gt;assertFalse($iso_found, <span class="stringliteral">&#39;Encoding should not be utf-8 in &#39;</span> . $xml);
<a name="l00159"></a>00159     
<a name="l00160"></a>00160   }
<a name="l00161"></a>00161   
<a name="l00162"></a><a class="code" href="class_query_path_test.html#ac726bef01aa32bd79bcdc5bdc4f0f327">00162</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ac726bef01aa32bd79bcdc5bdc4f0f327">testQPAbstractFactory</a>() {
<a name="l00163"></a>00163     <a class="code" href="dbpedia_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> = array(<span class="stringliteral">&#39;QueryPath_class&#39;</span> =&gt; <span class="stringliteral">&#39;QueryPathExtended&#39;</span>);
<a name="l00164"></a>00164     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(NULL, NULL, <a class="code" href="dbpedia_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>);
<a name="l00165"></a>00165     $this-&gt;assertTrue(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> instanceof <a class="code" href="class_query_path_extended.html" title="A simple mock for testing qp()&#39;s abstract factory.">QueryPathExtended</a>, <span class="stringliteral">&#39;Is instance of extending class.&#39;</span>);
<a name="l00166"></a>00166     $this-&gt;assertTrue(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;foonator(), <span class="stringliteral">&#39;Has special foonator() function.&#39;</span>);
<a name="l00167"></a>00167   }
<a name="l00168"></a>00168   
<a name="l00169"></a><a class="code" href="class_query_path_test.html#af5bbb155ad4a2a2793507a55e97d934b">00169</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#af5bbb155ad4a2a2793507a55e97d934b">testQPAbstractFactoryIterating</a>() {
<a name="l00170"></a>00170     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;l&gt;&lt;i/&gt;&lt;i/&gt;&lt;i/&gt;&lt;i/&gt;&lt;i/&gt;&lt;/l&gt;&#39;</span>;
<a name="l00171"></a>00171     <a class="code" href="dbpedia_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a> = array(<span class="stringliteral">&#39;QueryPath_class&#39;</span> =&gt; <span class="stringliteral">&#39;QueryPathExtended&#39;</span>);
<a name="l00172"></a>00172     <span class="keywordflow">foreach</span>(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="charliteral">&#39;i&#39;</span>, <a class="code" href="dbpedia_8php.html#a011800c63ece4cbbfa77136a20607023">$options</a>) as $item) {
<a name="l00173"></a>00173       $this-&gt;assertTrue($item instanceof <a class="code" href="class_query_path_extended.html" title="A simple mock for testing qp()&#39;s abstract factory.">QueryPathExtended</a>, <span class="stringliteral">&#39;Is instance of extending class.&#39;</span>);
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175     
<a name="l00176"></a>00176   }
<a name="l00177"></a>00177   <span class="comment"></span>
<a name="l00178"></a>00178 <span class="comment">  /**</span>
<a name="l00179"></a>00179 <span class="comment">   * @expectedException QueryPathException</span>
<a name="l00180"></a>00180 <span class="comment">   */</span>
<a name="l00181"></a><a class="code" href="class_query_path_test.html#a0bdae780fb83df3f4553b88cbedb8d16">00181</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a0bdae780fb83df3f4553b88cbedb8d16" title="QueryPathException">testFailedCall</a>() {
<a name="l00182"></a>00182     <span class="comment">// This should hit __call() and then fail.</span>
<a name="l00183"></a>00183     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>()-&gt;fooMethod();
<a name="l00184"></a>00184   }
<a name="l00185"></a>00185   <span class="comment"></span>
<a name="l00186"></a>00186 <span class="comment">  /**</span>
<a name="l00187"></a>00187 <span class="comment">   * @expectedException QueryPathException</span>
<a name="l00188"></a>00188 <span class="comment">   */</span>
<a name="l00189"></a><a class="code" href="class_query_path_test.html#ad3093748d1fe4e29e70d35fab9493c53">00189</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ad3093748d1fe4e29e70d35fab9493c53" title="QueryPathException">testFailedObjectConstruction</a>() {
<a name="l00190"></a>00190     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="keyword">new</span> stdClass());
<a name="l00191"></a>00191   }
<a name="l00192"></a>00192   <span class="comment"></span>
<a name="l00193"></a>00193 <span class="comment">  /**</span>
<a name="l00194"></a>00194 <span class="comment">   * @expectedException QueryPathParseException</span>
<a name="l00195"></a>00195 <span class="comment">   */</span>
<a name="l00196"></a><a class="code" href="class_query_path_test.html#a3202a1cf31830ed43f222b39f3812494">00196</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a3202a1cf31830ed43f222b39f3812494" title="QueryPathParseException">testFailedHTTPLoad</a>() {
<a name="l00197"></a>00197     <span class="keywordflow">try</span> {
<a name="l00198"></a>00198       <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;http://localhost:8877/no_such_file.xml&#39;</span>);
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200     <span class="keywordflow">catch</span> (Exception $e) {
<a name="l00201"></a>00201       <span class="comment">//print $e-&gt;getMessage();</span>
<a name="l00202"></a>00202       <span class="keywordflow">throw</span> $e;
<a name="l00203"></a>00203     }
<a name="l00204"></a>00204   }
<a name="l00205"></a>00205   <span class="comment"></span>
<a name="l00206"></a>00206 <span class="comment">  /**</span>
<a name="l00207"></a>00207 <span class="comment">   * @expectedException QueryPathParseException</span>
<a name="l00208"></a>00208 <span class="comment">   */</span>
<a name="l00209"></a><a class="code" href="class_query_path_test.html#a9793be28df946655689c4e114631dae9">00209</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a9793be28df946655689c4e114631dae9" title="QueryPathParseException">testFailedHTTPLoadWithContext</a>() {
<a name="l00210"></a>00210     <span class="keywordflow">try</span> {
<a name="l00211"></a>00211       <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;http://localhost:8877/no_such_file.xml&#39;</span>, NULL, array(<span class="stringliteral">&#39;foo&#39;</span> =&gt; <span class="stringliteral">&#39;bar&#39;</span>));
<a name="l00212"></a>00212     }
<a name="l00213"></a>00213     <span class="keywordflow">catch</span> (Exception $e) {
<a name="l00214"></a>00214       <span class="comment">//print $e-&gt;getMessage();</span>
<a name="l00215"></a>00215       <span class="keywordflow">throw</span> $e;
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217   }
<a name="l00218"></a>00218   <span class="comment"></span>
<a name="l00219"></a>00219 <span class="comment">  /**</span>
<a name="l00220"></a>00220 <span class="comment">   * @expectedException QueryPathParseException</span>
<a name="l00221"></a>00221 <span class="comment">   */</span>
<a name="l00222"></a><a class="code" href="class_query_path_test.html#ac6a76c87a58a687ce92de8f2f6c54b6f">00222</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ac6a76c87a58a687ce92de8f2f6c54b6f" title="QueryPathParseException">testFailedParseHTMLElement</a>() {
<a name="l00223"></a>00223     <span class="keywordflow">try</span> {
<a name="l00224"></a>00224       <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;foo&gt;&amp;foonator;&lt;/foo&gt;&#39;</span>, NULL);
<a name="l00225"></a>00225     }
<a name="l00226"></a>00226     <span class="keywordflow">catch</span> (Exception $e) {
<a name="l00227"></a>00227       <span class="comment">//print $e-&gt;getMessage();</span>
<a name="l00228"></a>00228       <span class="keywordflow">throw</span> $e;
<a name="l00229"></a>00229     }
<a name="l00230"></a>00230   }
<a name="l00231"></a>00231 <span class="comment"></span>
<a name="l00232"></a>00232 <span class="comment">  /**</span>
<a name="l00233"></a>00233 <span class="comment">   * @expectedException QueryPathParseException</span>
<a name="l00234"></a>00234 <span class="comment">   */</span>
<a name="l00235"></a><a class="code" href="class_query_path_test.html#ade51d306680608dd05f134760f5b59f7">00235</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ade51d306680608dd05f134760f5b59f7" title="QueryPathParseException">testFailedParseXMLElement</a>() {
<a name="l00236"></a>00236     <span class="keywordflow">try</span> {
<a name="l00237"></a>00237       <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;foo&gt;&lt;bar&gt;foonator;&lt;/foo&gt;&#39;</span>, NULL);
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239     <span class="keywordflow">catch</span> (Exception $e) {
<a name="l00240"></a>00240       <span class="comment">//print $e-&gt;getMessage();</span>
<a name="l00241"></a>00241       <span class="keywordflow">throw</span> $e;
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243   }
<a name="l00244"></a><a class="code" href="class_query_path_test.html#a3f5ae2b9df26ef142299cb87ce726517">00244</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a3f5ae2b9df26ef142299cb87ce726517">testIgnoreParserWarnings</a>() {
<a name="l00245"></a>00245     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = @<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;html&gt;&lt;body&gt;&lt;b&gt;&lt;i&gt;BAD!&lt;/b&gt;&lt;/i&gt;&lt;/body&gt;&#39;</span>, NULL, array(<span class="stringliteral">&#39;ignore_parser_warnings&#39;</span> =&gt; TRUE));
<a name="l00246"></a>00246     $this-&gt;assertTrue(strpos(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;html(), <span class="stringliteral">&#39;&lt;i&gt;BAD!&lt;/i&gt;&#39;</span>) !== FALSE);
<a name="l00247"></a>00247     
<a name="l00248"></a>00248     <a class="code" href="class_query_path_options.html#ade88fdfb64ed8985f35323ba20c317c0" title="Merge the provided array with existing options.">QueryPathOptions::merge</a>(array(<span class="stringliteral">&#39;ignore_parser_warnings&#39;</span> =&gt; TRUE));
<a name="l00249"></a>00249     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = @<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;html&gt;&lt;body&gt;&lt;b&gt;&lt;i&gt;BAD!&lt;/b&gt;&lt;/i&gt;&lt;/body&gt;&#39;</span>);
<a name="l00250"></a>00250     $this-&gt;assertTrue(strpos(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;html(), <span class="stringliteral">&#39;&lt;i&gt;BAD!&lt;/i&gt;&#39;</span>) !== FALSE);
<a name="l00251"></a>00251     
<a name="l00252"></a>00252     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = @<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;html&gt;&lt;body&gt;&lt;blarg&gt;BAD!&lt;/blarg&gt;&lt;/body&gt;&#39;</span>);
<a name="l00253"></a>00253     $this-&gt;assertTrue(strpos(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;html(), <span class="stringliteral">&#39;&lt;blarg&gt;BAD!&lt;/blarg&gt;&#39;</span>) !== FALSE, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;html());
<a name="l00254"></a>00254     <a class="code" href="class_query_path_options.html#a36a43f8d6c72718c759e0af719b17ae6" title="Set the default options.">QueryPathOptions::set</a>(array()); <span class="comment">// Reset to empty options.</span>
<a name="l00255"></a>00255   }<span class="comment"></span>
<a name="l00256"></a>00256 <span class="comment">  /**</span>
<a name="l00257"></a>00257 <span class="comment">   * @expectedException QueryPathParseException</span>
<a name="l00258"></a>00258 <span class="comment">   */</span>  
<a name="l00259"></a><a class="code" href="class_query_path_test.html#a59c97a13c7e5a868f7f617c624d31012">00259</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a59c97a13c7e5a868f7f617c624d31012" title="QueryPathParseException">testFailedParseNonMarkup</a>() {
<a name="l00260"></a>00260     <span class="keywordflow">try</span> {
<a name="l00261"></a>00261       <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;23dfadf&#39;</span>, NULL);
<a name="l00262"></a>00262     }
<a name="l00263"></a>00263     <span class="keywordflow">catch</span> (Exception $e) {
<a name="l00264"></a>00264       <span class="comment">//print $e-&gt;getMessage();</span>
<a name="l00265"></a>00265       <span class="keywordflow">throw</span> $e;
<a name="l00266"></a>00266     }
<a name="l00267"></a>00267   }
<a name="l00268"></a>00268   <span class="comment"></span>
<a name="l00269"></a>00269 <span class="comment">  /**</span>
<a name="l00270"></a>00270 <span class="comment">   * @expectedException QueryPathParseException</span>
<a name="l00271"></a>00271 <span class="comment">   */</span>
<a name="l00272"></a><a class="code" href="class_query_path_test.html#af605ef02fbedcf0f474c0351a107586a">00272</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#af605ef02fbedcf0f474c0351a107586a" title="QueryPathParseException">testFailedParseEntity</a>() {
<a name="l00273"></a>00273     <span class="keywordflow">try</span> {
<a name="l00274"></a>00274       <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;foo&gt;&amp;foonator;&lt;/foo&gt;&#39;</span>, NULL);
<a name="l00275"></a>00275     }
<a name="l00276"></a>00276     <span class="keywordflow">catch</span> (Exception $e) {
<a name="l00277"></a>00277       <span class="comment">//print $e-&gt;getMessage();</span>
<a name="l00278"></a>00278       <span class="keywordflow">throw</span> $e;
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280   }
<a name="l00281"></a>00281   
<a name="l00282"></a><a class="code" href="class_query_path_test.html#a3e39c8fdded3c1bfbbb749b8b7cc44ae">00282</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a3e39c8fdded3c1bfbbb749b8b7cc44ae">testReplaceEntitiesOption</a>() {
<a name="l00283"></a>00283     <a class="code" href="docx_8php.html#a0a4baf0b22973c07685c3981f0d17fc4" title="DocX Parser.">$path</a> = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root/&gt;&#39;</span>;
<a name="l00284"></a>00284     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="docx_8php.html#a0a4baf0b22973c07685c3981f0d17fc4" title="DocX Parser.">$path</a>, NULL, array(<span class="stringliteral">&#39;replace_entities&#39;</span> =&gt; TRUE))-&gt;xml(<span class="stringliteral">&#39;&lt;foo&gt;&amp;&lt;/foo&gt;&#39;</span>)-&gt;xml();
<a name="l00285"></a>00285     $this-&gt;assertTrue(strpos($xml, <span class="stringliteral">&#39;&lt;foo&gt;&amp;amp;&lt;/foo&gt;&#39;</span>) !== FALSE);
<a name="l00286"></a>00286     
<a name="l00287"></a>00287     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="docx_8php.html#a0a4baf0b22973c07685c3981f0d17fc4" title="DocX Parser.">$path</a>, NULL, array(<span class="stringliteral">&#39;replace_entities&#39;</span> =&gt; TRUE))-&gt;html(<span class="stringliteral">&#39;&lt;foo&gt;&amp;&lt;/foo&gt;&#39;</span>)-&gt;xml();
<a name="l00288"></a>00288     $this-&gt;assertTrue(strpos($xml, <span class="stringliteral">&#39;&lt;foo&gt;&amp;amp;&lt;/foo&gt;&#39;</span>) !== FALSE);
<a name="l00289"></a>00289     
<a name="l00290"></a>00290     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="docx_8php.html#a0a4baf0b22973c07685c3981f0d17fc4" title="DocX Parser.">$path</a>, NULL, array(<span class="stringliteral">&#39;replace_entities&#39;</span> =&gt; TRUE))-&gt;xhtml(<span class="stringliteral">&#39;&lt;foo&gt;&amp;&lt;/foo&gt;&#39;</span>)-&gt;xml();
<a name="l00291"></a>00291     $this-&gt;assertTrue(strpos($xml, <span class="stringliteral">&#39;&lt;foo&gt;&amp;amp;&lt;/foo&gt;&#39;</span>) !== FALSE);
<a name="l00292"></a>00292     
<a name="l00293"></a>00293     <a class="code" href="class_query_path_options.html#a36a43f8d6c72718c759e0af719b17ae6" title="Set the default options.">QueryPathOptions::set</a>(array(<span class="stringliteral">&#39;replace_entities&#39;</span> =&gt; TRUE));
<a name="l00294"></a>00294     $this-&gt;assertTrue(strpos($xml, <span class="stringliteral">&#39;&lt;foo&gt;&amp;amp;&lt;/foo&gt;&#39;</span>) !== FALSE);
<a name="l00295"></a>00295     <a class="code" href="class_query_path_options.html#a36a43f8d6c72718c759e0af719b17ae6" title="Set the default options.">QueryPathOptions::set</a>(array());
<a name="l00296"></a>00296   }
<a name="l00297"></a>00297   
<a name="l00298"></a><a class="code" href="class_query_path_test.html#aa986dacbb6e23b7d9d88119c24aa6657">00298</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#aa986dacbb6e23b7d9d88119c24aa6657">testFind</a>() {
<a name="l00299"></a>00299     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00300"></a>00300     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;find(<span class="stringliteral">&#39;#head&#39;</span>);
<a name="l00301"></a>00301     $this-&gt;assertEquals(1, count(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get()));
<a name="l00302"></a>00302     $this-&gt;assertEquals(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0)-&gt;tagName, <span class="stringliteral">&#39;head&#39;</span>);
<a name="l00303"></a>00303     
<a name="l00304"></a>00304     $this-&gt;assertEquals(<span class="stringliteral">&#39;inner&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;find(<span class="stringliteral">&#39;.innerClass&#39;</span>)-&gt;tag());
<a name="l00305"></a>00305     
<a name="l00306"></a>00306     $string = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root class=&quot;findme&quot;&gt;Test&lt;/root&gt;&#39;</span>;
<a name="l00307"></a>00307     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($string)-&gt;find(<span class="stringliteral">&#39;.findme&#39;</span>);
<a name="l00308"></a>00308     $this-&gt;assertEquals(1, count(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get()), <span class="stringliteral">&#39;Check class.&#39;</span>);
<a name="l00309"></a>00309     $this-&gt;assertEquals(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0)-&gt;tagName, <span class="stringliteral">&#39;root&#39;</span>);
<a name="l00310"></a>00310   }
<a name="l00311"></a>00311   
<a name="l00312"></a><a class="code" href="class_query_path_test.html#ae6a1768d226da3908122fb5bfd42b7f6">00312</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ae6a1768d226da3908122fb5bfd42b7f6">testTop</a>() {
<a name="l00313"></a>00313     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00314"></a>00314     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;find(<span class="stringliteral">&#39;li&#39;</span>);
<a name="l00315"></a>00315     $this-&gt;assertGreaterThan(2, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size());
<a name="l00316"></a>00316     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top()-&gt;size());
<a name="l00317"></a>00317     
<a name="l00318"></a>00318     <span class="comment">// Added for QP 2.0</span>
<a name="l00319"></a>00319     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;u&gt;&lt;l/&gt;&lt;l/&gt;&lt;l/&gt;&lt;/u&gt;&lt;u/&gt;&lt;/root&gt;&#39;</span>;
<a name="l00320"></a>00320     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="charliteral">&#39;l&#39;</span>);
<a name="l00321"></a>00321     $this-&gt;assertEquals(3, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size());
<a name="l00322"></a>00322     $this-&gt;assertEquals(2, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top(<span class="charliteral">&#39;u&#39;</span>)-&gt;size());
<a name="l00323"></a>00323   }
<a name="l00324"></a>00324   
<a name="l00325"></a><a class="code" href="class_query_path_test.html#a247f6f8ec009bba3d2411add9f46c84b">00325</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a247f6f8ec009bba3d2411add9f46c84b">testAttr</a>() {
<a name="l00326"></a>00326     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00327"></a>00327     
<a name="l00328"></a>00328     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;find(<span class="stringliteral">&#39;#head&#39;</span>);
<a name="l00329"></a>00329     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size());
<a name="l00330"></a>00330     $this-&gt;assertEquals(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0)-&gt;getAttribute(<span class="stringliteral">&#39;id&#39;</span>), <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;attr(<span class="stringliteral">&#39;id&#39;</span>));
<a name="l00331"></a>00331     
<a name="l00332"></a>00332     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;attr(<span class="stringliteral">&#39;foo&#39;</span>, <span class="stringliteral">&#39;bar&#39;</span>);
<a name="l00333"></a>00333     $this-&gt;assertEquals(<span class="stringliteral">&#39;bar&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;attr(<span class="stringliteral">&#39;foo&#39;</span>));
<a name="l00334"></a>00334     
<a name="l00335"></a>00335     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;attr(array(<span class="stringliteral">&#39;foo2&#39;</span> =&gt; <span class="stringliteral">&#39;bar&#39;</span>, <span class="stringliteral">&#39;foo3&#39;</span> =&gt; <span class="stringliteral">&#39;baz&#39;</span>));
<a name="l00336"></a>00336     $this-&gt;assertEquals(<span class="stringliteral">&#39;baz&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;attr(<span class="stringliteral">&#39;foo3&#39;</span>));
<a name="l00337"></a>00337     
<a name="l00338"></a>00338     <span class="comment">// Check magic nodeType attribute:</span>
<a name="l00339"></a>00339     $this-&gt;assertEquals(XML_ELEMENT_NODE, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;find(<span class="stringliteral">&#39;#head&#39;</span>)-&gt;attr(<span class="stringliteral">&#39;nodeType&#39;</span>));
<a name="l00340"></a>00340     
<a name="l00341"></a>00341     <span class="comment">// Since QP 2.1</span>
<a name="l00342"></a>00342     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;one a1=&quot;1&quot; a2=&quot;2&quot; a3=&quot;3&quot;/&gt;&lt;/root&gt;&#39;</span>;
<a name="l00343"></a>00343     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;one&#39;</span>);
<a name="l00344"></a>00344     $attrs = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;attr();
<a name="l00345"></a>00345     $this-&gt;assertEquals(3, count($attrs), <span class="stringliteral">&#39;Three attributes&#39;</span>);
<a name="l00346"></a>00346     $this-&gt;assertEquals(<span class="charliteral">&#39;1&#39;</span>, $attrs[<span class="stringliteral">&#39;a1&#39;</span>], <span class="stringliteral">&#39;Attribute a1 has value 1.&#39;</span>);
<a name="l00347"></a>00347   }
<a name="l00348"></a>00348   
<a name="l00349"></a><a class="code" href="class_query_path_test.html#a5becfb697dd85f782e1d69ac0118cdae">00349</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a5becfb697dd85f782e1d69ac0118cdae">testHasAttr</a>() {
<a name="l00350"></a>00350     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div foo=&quot;bar&quot;/&gt;&lt;/root&gt;&#39;</span>;
<a name="l00351"></a>00351     
<a name="l00352"></a>00352     $this-&gt;assertFalse(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;root&#39;</span>)-&gt;hasAttr(<span class="stringliteral">&#39;foo&#39;</span>));
<a name="l00353"></a>00353     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;hasAttr(<span class="stringliteral">&#39;foo&#39;</span>));
<a name="l00354"></a>00354     
<a name="l00355"></a>00355     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div foo=&quot;bar&quot;/&gt;&lt;div foo=&quot;baz&quot;&gt;&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l00356"></a>00356     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;hasAttr(<span class="stringliteral">&#39;foo&#39;</span>));
<a name="l00357"></a>00357     
<a name="l00358"></a>00358     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div bar=&quot;bar&quot;/&gt;&lt;div foo=&quot;baz&quot;&gt;&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l00359"></a>00359     $this-&gt;assertFalse(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;hasAttr(<span class="stringliteral">&#39;foo&#39;</span>));
<a name="l00360"></a>00360     
<a name="l00361"></a>00361     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div bar=&quot;bar&quot;/&gt;&lt;div bAZ=&quot;baz&quot;&gt;&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l00362"></a>00362     $this-&gt;assertFalse(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;hasAttr(<span class="stringliteral">&#39;foo&#39;</span>));
<a name="l00363"></a>00363   }
<a name="l00364"></a>00364   
<a name="l00365"></a><a class="code" href="class_query_path_test.html#ad0d60653d5ae0c9be85637c110fe6b20">00365</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ad0d60653d5ae0c9be85637c110fe6b20">testVal</a>() {
<a name="l00366"></a>00366     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;foo&gt;&lt;bar value=&quot;test&quot;/&gt;&lt;/foo&gt;&#39;</span>, <span class="stringliteral">&#39;bar&#39;</span>);
<a name="l00367"></a>00367     $this-&gt;assertEquals(<span class="stringliteral">&#39;test&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;val());
<a name="l00368"></a>00368     
<a name="l00369"></a>00369     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;foo&gt;&lt;bar/&gt;&lt;/foo&gt;&#39;</span>, <span class="stringliteral">&#39;bar&#39;</span>)-&gt;val(<span class="stringliteral">&#39;test&#39;</span>);
<a name="l00370"></a>00370     $this-&gt;assertEquals(<span class="stringliteral">&#39;test&#39;</span>, $qp-&gt;attr(<span class="stringliteral">&#39;value&#39;</span>));
<a name="l00371"></a>00371   }
<a name="l00372"></a>00372   
<a name="l00373"></a><a class="code" href="class_query_path_test.html#a2f7991dc7f99080c302824925bb82628">00373</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a2f7991dc7f99080c302824925bb82628">testCss</a>() {
<a name="l00374"></a>00374     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00375"></a>00375     $this-&gt;assertEquals(<span class="stringliteral">&#39;foo: bar;&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;css(<span class="stringliteral">&#39;foo&#39;</span>, <span class="stringliteral">&#39;bar&#39;</span>)-&gt;attr(<span class="stringliteral">&#39;style&#39;</span>));
<a name="l00376"></a>00376     $this-&gt;assertEquals(<span class="stringliteral">&#39;foo: bar;&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;css(<span class="stringliteral">&#39;foo&#39;</span>, <span class="stringliteral">&#39;bar&#39;</span>)-&gt;css());
<a name="l00377"></a>00377     $this-&gt;assertEquals(<span class="stringliteral">&#39;foo: bar;&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;css(array(<span class="stringliteral">&#39;foo&#39;</span> =&gt;<span class="stringliteral">&#39;bar&#39;</span>))-&gt;css()); 
<a name="l00378"></a>00378     
<a name="l00379"></a>00379     <span class="comment">// Issue #28: Setting styles in sequence should not result in the second</span>
<a name="l00380"></a>00380     <span class="comment">// style overwriting the first style:</span>
<a name="l00381"></a>00381     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;css(<span class="stringliteral">&#39;color&#39;</span>, <span class="stringliteral">&#39;blue&#39;</span>)-&gt;css(<span class="stringliteral">&#39;background-color&#39;</span>, <span class="stringliteral">&#39;white&#39;</span>);
<a name="l00382"></a>00382     
<a name="l00383"></a>00383     $expects = <span class="stringliteral">&#39;color: blue;background-color: white;&#39;</span>;
<a name="l00384"></a>00384     $actual = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;css();
<a name="l00385"></a>00385     $this-&gt;assertEquals(bin2hex($expects), bin2hex($actual), <span class="stringliteral">&#39;Two css calls should result in two attrs.&#39;</span>);
<a name="l00386"></a>00386     
<a name="l00387"></a>00387     <span class="comment">// Make sure array merges work.</span>
<a name="l00388"></a>00388     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;css(<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;a&#39;</span>)-&gt;css(array(<span class="charliteral">&#39;b&#39;</span>=&gt;<span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span>=&gt;<span class="charliteral">&#39;c&#39;</span>));
<a name="l00389"></a>00389     $this-&gt;assertEquals(<span class="stringliteral">&#39;a: a;b: b;c: c;&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;css());
<a name="l00390"></a>00390     
<a name="l00391"></a>00391     <span class="comment">// Make sure that second assignment overrides first assignment.</span>
<a name="l00392"></a>00392     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;css(<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;a&#39;</span>)-&gt;css(array(<span class="charliteral">&#39;b&#39;</span>=&gt;<span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;a&#39;</span>=&gt;<span class="charliteral">&#39;c&#39;</span>));
<a name="l00393"></a>00393     $this-&gt;assertEquals(<span class="stringliteral">&#39;a: c;b: b;&#39;</span>, $qp-&gt;css());
<a name="l00394"></a>00394   }
<a name="l00395"></a>00395   
<a name="l00396"></a><a class="code" href="class_query_path_test.html#a1554f8bbe9ea632323ac6e728bc9bc1b">00396</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a1554f8bbe9ea632323ac6e728bc9bc1b">testRemoveAttr</a>() {
<a name="l00397"></a>00397     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00398"></a>00398     
<a name="l00399"></a>00399     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;removeAttr(<span class="stringliteral">&#39;class&#39;</span>);
<a name="l00400"></a>00400     $this-&gt;assertEquals(2, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size());
<a name="l00401"></a>00401     $this-&gt;assertFalse(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0)-&gt;hasAttribute(<span class="stringliteral">&#39;class&#39;</span>));
<a name="l00402"></a>00402     
<a name="l00403"></a>00403   }
<a name="l00404"></a>00404   
<a name="l00405"></a><a class="code" href="class_query_path_test.html#a8737ef4c769d7145918c3f927c7a6117">00405</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a8737ef4c769d7145918c3f927c7a6117">testEq</a>() {
<a name="l00406"></a>00406     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00407"></a>00407     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;eq(0);
<a name="l00408"></a>00408     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size());
<a name="l00409"></a>00409     $this-&gt;assertEquals(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;attr(<span class="stringliteral">&#39;id&#39;</span>), <span class="stringliteral">&#39;one&#39;</span>);
<a name="l00410"></a>00410     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;eq(0)-&gt;size());
<a name="l00411"></a>00411     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;eq(0)-&gt;size());
<a name="l00412"></a>00412     $this-&gt;assertEquals(<span class="stringliteral">&quot;Hello&quot;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;eq(0)-&gt;text());
<a name="l00413"></a>00413     $this-&gt;assertEquals(<span class="stringliteral">&quot;Last&quot;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;eq(3)-&gt;text());
<a name="l00414"></a>00414   }
<a name="l00415"></a>00415   
<a name="l00416"></a><a class="code" href="class_query_path_test.html#a31b99f404170c9478c23f76f9b0b61ea">00416</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a31b99f404170c9478c23f76f9b0b61ea">testIs</a>() {
<a name="l00417"></a>00417     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00418"></a>00418     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;find(<span class="stringliteral">&#39;#one&#39;</span>)-&gt;is(<span class="stringliteral">&#39;#one&#39;</span>));
<a name="l00419"></a>00419     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;is(<span class="stringliteral">&#39;#one&#39;</span>));
<a name="l00420"></a>00420     
<a name="l00421"></a>00421     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;find(<span class="stringliteral">&#39;#one&#39;</span>);
<a name="l00422"></a>00422     $ele = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0);
<a name="l00423"></a>00423     $this-&gt;assertTrue(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top(<span class="stringliteral">&#39;#one&#39;</span>)-&gt;is($ele));
<a name="l00424"></a>00424     
<a name="l00425"></a>00425     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;find(<span class="stringliteral">&#39;#one&#39;</span>);
<a name="l00426"></a>00426     $ele = $qp-&gt;get(0);
<a name="l00427"></a>00427     $ele2 = $qp-&gt;top(<span class="stringliteral">&#39;#two&#39;</span>)-&gt;get(0);
<a name="l00428"></a>00428     
<a name="l00429"></a>00429     $list = <span class="keyword">new</span> SplDoublyLinkedList();
<a name="l00430"></a>00430     $list-&gt;push($ele);
<a name="l00431"></a>00431     $list-&gt;push($ele2);
<a name="l00432"></a>00432     $this-&gt;assertEquals(2, count($list));
<a name="l00433"></a>00433     <span class="comment">//$this-&gt;assertEquals(2, )</span>
<a name="l00434"></a>00434     $this-&gt;assertTrue($qp-&gt;top(<span class="stringliteral">&#39;#one,#two&#39;</span>)-&gt;is($list));
<a name="l00435"></a>00435     
<a name="l00436"></a>00436   }
<a name="l00437"></a>00437   
<a name="l00438"></a><a class="code" href="class_query_path_test.html#a0d5e64d219e7d25c074c5d022306dd9f">00438</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a0d5e64d219e7d25c074c5d022306dd9f">testIndex</a>() {
<a name="l00439"></a>00439     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;foo&gt;&lt;bar id=&quot;one&quot;/&gt;&lt;baz id=&quot;two&quot;/&gt;&lt;/foo&gt;&#39;</span>;
<a name="l00440"></a>00440     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;bar&#39;</span>);
<a name="l00441"></a>00441     $e1 = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0);
<a name="l00442"></a>00442     $this-&gt;assertEquals(0, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;find(<span class="stringliteral">&#39;bar&#39;</span>)-&gt;index($e1));
<a name="l00443"></a>00443     $this-&gt;assertFalse(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top()-&gt;find(<span class="stringliteral">&#39;#two&#39;</span>)-&gt;index($e1));
<a name="l00444"></a>00444   }
<a name="l00445"></a>00445   
<a name="l00446"></a><a class="code" href="class_query_path_test.html#a290134a62d8d98eb553ddedcc8098059">00446</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a290134a62d8d98eb553ddedcc8098059">testFilter</a>() {
<a name="l00447"></a>00447     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00448"></a>00448     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;filter(<span class="stringliteral">&#39;li&#39;</span>)-&gt;size());
<a name="l00449"></a>00449     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;filter(<span class="stringliteral">&#39;li&#39;</span>)-&gt;size());
<a name="l00450"></a>00450     $this-&gt;assertEquals(<span class="stringliteral">&#39;inner-two&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;filter(<span class="stringliteral">&#39;li&#39;</span>)-&gt;eq(1)-&gt;attr(<span class="stringliteral">&#39;id&#39;</span>));
<a name="l00451"></a>00451   }
<a name="l00452"></a>00452   
<a name="l00453"></a><a class="code" href="class_query_path_test.html#ad8e4992e902bdf96ea5abba61ade8884">00453</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ad8e4992e902bdf96ea5abba61ade8884">testFilterPreg</a>() {
<a name="l00454"></a>00454     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div id=&quot;one&quot;&gt;Foo&lt;/div&gt;&lt;div&gt;Moo&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l00455"></a>00455     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;filterPreg(<span class="stringliteral">&#39;/Foo/&#39;</span>);
<a name="l00456"></a>00456     
<a name="l00457"></a>00457     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;Size());
<a name="l00458"></a>00458     
<a name="l00459"></a>00459     <span class="comment">// Check to make sure textContent is collected correctly.</span>
<a name="l00460"></a>00460     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div&gt;Hello &lt;i&gt;World&lt;/i&gt;&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l00461"></a>00461     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;filterPreg(<span class="stringliteral">&#39;/Hello\sWorld/&#39;</span>);
<a name="l00462"></a>00462     
<a name="l00463"></a>00463     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;Size());
<a name="l00464"></a>00464   }
<a name="l00465"></a>00465   
<a name="l00466"></a><a class="code" href="class_query_path_test.html#a00cb57feb2833e706b931f28d4496101">00466</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a00cb57feb2833e706b931f28d4496101">testFilterLambda</a>() {
<a name="l00467"></a>00467     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00468"></a>00468     <span class="comment">// Get all evens:</span>
<a name="l00469"></a>00469     $l = <span class="stringliteral">&#39;return (($index + 1) % 2 == 0);&#39;</span>;
<a name="l00470"></a>00470     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;filterLambda($l)-&gt;size());
<a name="l00471"></a>00471   }
<a name="l00472"></a>00472   
<a name="l00473"></a><a class="code" href="class_query_path_test.html#a153b662b244f06403181d3d2b3fe76af">00473</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a153b662b244f06403181d3d2b3fe76af">filterCallbackFunction</a>($index, $item) {
<a name="l00474"></a>00474     <span class="keywordflow">return</span> (($index + 1) % 2 == 0);
<a name="l00475"></a>00475   }
<a name="l00476"></a>00476   
<a name="l00477"></a>00477   
<a name="l00478"></a><a class="code" href="class_query_path_test.html#a65522402849cf1884b8dfecfccc0e2eb">00478</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a65522402849cf1884b8dfecfccc0e2eb">testFilterCallback</a>() {
<a name="l00479"></a>00479     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00480"></a>00480     $cb = array($this, <span class="stringliteral">&#39;filterCallbackFunction&#39;</span>);
<a name="l00481"></a>00481     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;filterCallback($cb)-&gt;size());
<a name="l00482"></a>00482   }
<a name="l00483"></a>00483   <span class="comment"></span>
<a name="l00484"></a>00484 <span class="comment">  /**</span>
<a name="l00485"></a>00485 <span class="comment">   * @expectedException QueryPathException</span>
<a name="l00486"></a>00486 <span class="comment">   */</span>
<a name="l00487"></a><a class="code" href="class_query_path_test.html#a418f19c29329149ce8d719b81e9de42a">00487</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a418f19c29329149ce8d719b81e9de42a" title="QueryPathException">testFailedFilterCallback</a>() {
<a name="l00488"></a>00488     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00489"></a>00489     $cb = array($this, <span class="stringliteral">&#39;noSuchFunction&#39;</span>);
<a name="l00490"></a>00490     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;filterCallback($cb)-&gt;size();
<a name="l00491"></a>00491   }
<a name="l00492"></a>00492 <span class="comment"></span>
<a name="l00493"></a>00493 <span class="comment">  /**</span>
<a name="l00494"></a>00494 <span class="comment">   * @expectedException QueryPathException</span>
<a name="l00495"></a>00495 <span class="comment">   */</span>
<a name="l00496"></a><a class="code" href="class_query_path_test.html#a31815e7113c62a36f22973276b7a2e1a">00496</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a31815e7113c62a36f22973276b7a2e1a" title="QueryPathException">testFailedMapCallback</a>() {
<a name="l00497"></a>00497     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00498"></a>00498     $cb = array($this, <span class="stringliteral">&#39;noSuchFunction&#39;</span>);
<a name="l00499"></a>00499     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;map($cb)-&gt;size();
<a name="l00500"></a>00500   }
<a name="l00501"></a>00501 
<a name="l00502"></a>00502   
<a name="l00503"></a><a class="code" href="class_query_path_test.html#aacfc99a1ba04f257524a49beee5b6d1b">00503</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#aacfc99a1ba04f257524a49beee5b6d1b">testNot</a>() {
<a name="l00504"></a>00504     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00505"></a>00505     
<a name="l00506"></a>00506     <span class="comment">// Test with selector</span>
<a name="l00507"></a>00507     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li:odd&#39;</span>)-&gt;not(<span class="stringliteral">&#39;#one&#39;</span>);
<a name="l00508"></a>00508     $this-&gt;assertEquals(2, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size());
<a name="l00509"></a>00509     
<a name="l00510"></a>00510     <span class="comment">// Test with DOM Element</span>
<a name="l00511"></a>00511     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>);
<a name="l00512"></a>00512     $el = $qp-&gt;branch()-&gt;filter(<span class="stringliteral">&#39;#one&#39;</span>)-&gt;get(0);
<a name="l00513"></a>00513     $this-&gt;assertTrue($el instanceof DOMElement, <span class="stringliteral">&quot;Is DOM element.&quot;</span>);
<a name="l00514"></a>00514     $this-&gt;assertEquals(4, $qp-&gt;not($el)-&gt;size());
<a name="l00515"></a>00515     
<a name="l00516"></a>00516     <span class="comment">// Test with array of DOM Elements</span>
<a name="l00517"></a>00517     $qp = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>);
<a name="l00518"></a>00518     $arr = $qp-&gt;get();
<a name="l00519"></a>00519     $this-&gt;assertEquals(count($arr), $qp-&gt;size());
<a name="l00520"></a>00520     array_shift($arr);
<a name="l00521"></a>00521     $this-&gt;assertEquals(1, $qp-&gt;not($arr)-&gt;size());
<a name="l00522"></a>00522   }
<a name="l00523"></a>00523   
<a name="l00524"></a><a class="code" href="class_query_path_test.html#a21481737211d8105fad280eee856c7a4">00524</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a21481737211d8105fad280eee856c7a4">testSlice</a>() {
<a name="l00525"></a>00525     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00526"></a>00526     <span class="comment">// There are five &lt;li&gt; elements</span>
<a name="l00527"></a>00527     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;slice(1);
<a name="l00528"></a>00528     $this-&gt;assertEquals(4, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size());
<a name="l00529"></a>00529     
<a name="l00530"></a>00530     <span class="comment">// The first item in the matches should be #two.</span>
<a name="l00531"></a>00531     $this-&gt;assertEquals(<span class="stringliteral">&#39;two&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;attr(<span class="stringliteral">&#39;id&#39;</span>));
<a name="l00532"></a>00532     
<a name="l00533"></a>00533     <span class="comment">// THe last item should be #five</span>
<a name="l00534"></a>00534     $this-&gt;assertEquals(<span class="stringliteral">&#39;five&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;eq(3)-&gt;attr(<span class="stringliteral">&#39;id&#39;</span>));
<a name="l00535"></a>00535     
<a name="l00536"></a>00536     <span class="comment">// This should not throw an error.</span>
<a name="l00537"></a>00537     $this-&gt;assertEquals(4, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;slice(1, 9)-&gt;size());
<a name="l00538"></a>00538     
<a name="l00539"></a>00539     $this-&gt;assertEquals(0, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;slice(9)-&gt;size());
<a name="l00540"></a>00540     
<a name="l00541"></a>00541     <span class="comment">// The first item should be #two, the last #three</span>
<a name="l00542"></a>00542     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;slice(1, 2);
<a name="l00543"></a>00543     $this-&gt;assertEquals(2, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size());
<a name="l00544"></a>00544     $this-&gt;assertEquals(<span class="stringliteral">&#39;two&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;attr(<span class="stringliteral">&#39;id&#39;</span>));
<a name="l00545"></a>00545     $this-&gt;assertEquals(<span class="stringliteral">&#39;three&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;eq(1)-&gt;attr(<span class="stringliteral">&#39;id&#39;</span>));
<a name="l00546"></a>00546   }
<a name="l00547"></a>00547   
<a name="l00548"></a><a class="code" href="class_query_path_test.html#a2fca8052921e5c5cc015088e37f20063">00548</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a2fca8052921e5c5cc015088e37f20063">mapCallbackFunction</a>($index, $item) {
<a name="l00549"></a>00549     <span class="keywordflow">if</span> ($index == 1) {
<a name="l00550"></a>00550       <span class="keywordflow">return</span> FALSE;
<a name="l00551"></a>00551     }
<a name="l00552"></a>00552     <span class="keywordflow">if</span> ($index == 2) {
<a name="l00553"></a>00553       <span class="keywordflow">return</span> array(1, 2, 3);
<a name="l00554"></a>00554     }
<a name="l00555"></a>00555     <span class="keywordflow">return</span> $index;
<a name="l00556"></a>00556   }
<a name="l00557"></a>00557   
<a name="l00558"></a><a class="code" href="class_query_path_test.html#a1af391d2d26433dd897f88715ffb8a92">00558</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a1af391d2d26433dd897f88715ffb8a92">testMap</a>() {
<a name="l00559"></a>00559     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00560"></a>00560     $fn = <span class="stringliteral">&#39;mapCallbackFunction&#39;</span>;
<a name="l00561"></a>00561     $this-&gt;assertEquals(7, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;map(array($this, $fn))-&gt;size());
<a name="l00562"></a>00562   }
<a name="l00563"></a>00563   
<a name="l00564"></a><a class="code" href="class_query_path_test.html#a07ef8ebe415122d894212aaf44b89b0c">00564</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a07ef8ebe415122d894212aaf44b89b0c">eachCallbackFunction</a>($index, $item) {
<a name="l00565"></a>00565     <span class="keywordflow">if</span> ($index &lt; 2) {
<a name="l00566"></a>00566       <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($item)-&gt;attr(<span class="stringliteral">&#39;class&#39;</span>, <span class="stringliteral">&#39;test&#39;</span>);
<a name="l00567"></a>00567     }
<a name="l00568"></a>00568     <span class="keywordflow">else</span> {
<a name="l00569"></a>00569       <span class="keywordflow">return</span> FALSE;
<a name="l00570"></a>00570     }
<a name="l00571"></a>00571   }
<a name="l00572"></a>00572   
<a name="l00573"></a><a class="code" href="class_query_path_test.html#a17a28a364957b2aa7800891b6e82c0f1">00573</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a17a28a364957b2aa7800891b6e82c0f1">testEach</a>() {
<a name="l00574"></a>00574     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00575"></a>00575     $fn = <span class="stringliteral">&#39;eachCallbackFunction&#39;</span>;
<a name="l00576"></a>00576     $res = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;each(array($this, $fn));
<a name="l00577"></a>00577     $this-&gt;assertEquals(5, $res-&gt;size());
<a name="l00578"></a>00578     $this-&gt;assertFalse($res-&gt;get(4)-&gt;getAttribute(<span class="stringliteral">&#39;class&#39;</span>) === NULL);
<a name="l00579"></a>00579     $this-&gt;assertEquals(<span class="stringliteral">&#39;test&#39;</span>, $res-&gt;eq(1)-&gt;attr(<span class="stringliteral">&#39;class&#39;</span>));
<a name="l00580"></a>00580     
<a name="l00581"></a>00581     <span class="comment">// Test when each runs out of things to test before returning.</span>
<a name="l00582"></a>00582     $res = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#one&#39;</span>)-&gt;each(array($this, $fn));
<a name="l00583"></a>00583     $this-&gt;assertEquals(1, $res-&gt;size());
<a name="l00584"></a>00584   }
<a name="l00585"></a>00585   <span class="comment"></span>
<a name="l00586"></a>00586 <span class="comment">  /**</span>
<a name="l00587"></a>00587 <span class="comment">   * @expectedException QueryPathException</span>
<a name="l00588"></a>00588 <span class="comment">   */</span>
<a name="l00589"></a><a class="code" href="class_query_path_test.html#a2e91a3f49fe82f90ba5447188b0fae7c">00589</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a2e91a3f49fe82f90ba5447188b0fae7c" title="QueryPathException">testEachOnInvalidCallback</a>() {
<a name="l00590"></a>00590     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00591"></a>00591     $fn = <span class="stringliteral">&#39;eachCallbackFunctionFake&#39;</span>;
<a name="l00592"></a>00592     $res = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;each(array($this, $fn));
<a name="l00593"></a>00593   }
<a name="l00594"></a>00594   
<a name="l00595"></a><a class="code" href="class_query_path_test.html#ab20aaa5d64fde6562d12d80128970416">00595</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ab20aaa5d64fde6562d12d80128970416">testEachLambda</a>() {
<a name="l00596"></a>00596     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00597"></a>00597     $fn = <span class="stringliteral">&#39;qp($item)-&gt;attr(&quot;class&quot;, &quot;foo&quot;);&#39;</span>;
<a name="l00598"></a>00598     $res = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;eachLambda($fn);
<a name="l00599"></a>00599     $this-&gt;assertEquals(<span class="stringliteral">&#39;foo&#39;</span>, $res-&gt;eq(1)-&gt;attr(<span class="stringliteral">&#39;class&#39;</span>));
<a name="l00600"></a>00600   }
<a name="l00601"></a>00601   
<a name="l00602"></a><a class="code" href="class_query_path_test.html#a9f64c3bd01d89d06479a8b1d0d39f1a4">00602</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a9f64c3bd01d89d06479a8b1d0d39f1a4">testDeepest</a>() {
<a name="l00603"></a>00603     <a class="code" href="test_8php.html#a7542d95618011800c61773127fa625cf">$str</a> = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<a name="l00604"></a>00604 <span class="stringliteral">    &lt;root&gt;</span>
<a name="l00605"></a>00605 <span class="stringliteral">      &lt;one/&gt;</span>
<a name="l00606"></a>00606 <span class="stringliteral">      &lt;one&gt;&lt;two/&gt;&lt;/one&gt;</span>
<a name="l00607"></a>00607 <span class="stringliteral">      &lt;one&gt;&lt;two&gt;&lt;three/&gt;&lt;/two&gt;&lt;/one&gt;</span>
<a name="l00608"></a>00608 <span class="stringliteral">      &lt;one&gt;&lt;two&gt;&lt;three&gt;&lt;four/&gt;&lt;/three&gt;&lt;/two&gt;&lt;/one&gt;</span>
<a name="l00609"></a>00609 <span class="stringliteral">      &lt;one/&gt;</span>
<a name="l00610"></a>00610 <span class="stringliteral">      &lt;one&gt;&lt;two&gt;&lt;three&gt;&lt;banana/&gt;&lt;/three&gt;&lt;/two&gt;&lt;/one&gt;</span>
<a name="l00611"></a>00611 <span class="stringliteral">    &lt;/root&gt;&#39;</span>;
<a name="l00612"></a>00612     $deepest = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="test_8php.html#a7542d95618011800c61773127fa625cf">$str</a>)-&gt;deepest();
<a name="l00613"></a>00613     $this-&gt;assertEquals(2, $deepest-&gt;size());
<a name="l00614"></a>00614     $this-&gt;assertEquals(<span class="stringliteral">&#39;four&#39;</span>, $deepest-&gt;get(0)-&gt;tagName);
<a name="l00615"></a>00615     $this-&gt;assertEquals(<span class="stringliteral">&#39;banana&#39;</span>, $deepest-&gt;get(1)-&gt;tagName);
<a name="l00616"></a>00616     
<a name="l00617"></a>00617     $deepest = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="test_8php.html#a7542d95618011800c61773127fa625cf">$str</a>, <span class="stringliteral">&#39;one&#39;</span>)-&gt;deepest();
<a name="l00618"></a>00618     $this-&gt;assertEquals(2, $deepest-&gt;size());
<a name="l00619"></a>00619     $this-&gt;assertEquals(<span class="stringliteral">&#39;four&#39;</span>, $deepest-&gt;get(0)-&gt;tagName);
<a name="l00620"></a>00620     $this-&gt;assertEquals(<span class="stringliteral">&#39;banana&#39;</span>, $deepest-&gt;get(1)-&gt;tagName);
<a name="l00621"></a>00621     
<a name="l00622"></a>00622     <a class="code" href="test_8php.html#a7542d95618011800c61773127fa625cf">$str</a> = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<a name="l00623"></a>00623 <span class="stringliteral">    &lt;root&gt;</span>
<a name="l00624"></a>00624 <span class="stringliteral">      CDATA</span>
<a name="l00625"></a>00625 <span class="stringliteral">    &lt;/root&gt;&#39;</span>;
<a name="l00626"></a>00626     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($str)-&gt;deepest()-&gt;size());
<a name="l00627"></a>00627   }
<a name="l00628"></a>00628   
<a name="l00629"></a><a class="code" href="class_query_path_test.html#a3413476c246fce914a7a9a4d6331636e">00629</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a3413476c246fce914a7a9a4d6331636e">testTag</a>() {
<a name="l00630"></a>00630     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00631"></a>00631     $this-&gt;assertEquals(<span class="stringliteral">&#39;li&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;tag());
<a name="l00632"></a>00632   }
<a name="l00633"></a>00633   
<a name="l00634"></a><a class="code" href="class_query_path_test.html#a9732cc3e9ff5f6f40fa7fcd7da4fbb21">00634</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a9732cc3e9ff5f6f40fa7fcd7da4fbb21">testAppend</a>() {
<a name="l00635"></a>00635     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00636"></a>00636     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;unary&#39;</span>)-&gt;append(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;find(<span class="stringliteral">&#39;:root &gt; unary &gt; test&#39;</span>)-&gt;size());
<a name="l00637"></a>00637     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;append(<span class="stringliteral">&#39;&lt;li id=&quot;appended&quot;/&gt;&#39;</span>);
<a name="l00638"></a>00638     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;find(<span class="stringliteral">&#39;#appended&#39;</span>)-&gt;size());
<a name="l00639"></a>00639     $this-&gt;assertNull(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0)-&gt;nextSibling);
<a name="l00640"></a>00640     
<a name="l00641"></a>00641     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;append(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;top()-&gt;find(<span class="stringliteral">&#39;test&#39;</span>)-&gt;size());
<a name="l00642"></a>00642     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;append(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;test/&gt;&#39;</span>))-&gt;top()-&gt;find(<span class="stringliteral">&#39;test&#39;</span>)-&gt;size());
<a name="l00643"></a>00643     
<a name="l00644"></a>00644     <span class="comment">// Issue #6: This seems to break on Debian Etch systems... no idea why.</span>
<a name="l00645"></a>00645     $this-&gt;assertEquals(<span class="stringliteral">&#39;test&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>()-&gt;append(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;top()-&gt;tag());
<a name="l00646"></a>00646     
<a name="l00647"></a>00647     <span class="comment">// Issue #7: Failure issues warnings</span>
<a name="l00648"></a>00648     <span class="comment">// This seems to be working as expected -- libxml emits</span>
<a name="l00649"></a>00649     <span class="comment">// parse errors.</span>
<a name="l00650"></a>00650     <span class="comment">//$this-&gt;assertEquals(NULL, qp()-&gt;append(&#39;&lt;test&#39;));</span>
<a name="l00651"></a>00651     
<a name="l00652"></a>00652     <span class="comment">// Test loading SimpleXML.</span>
<a name="l00653"></a>00653     $simp = simplexml_load_file(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>);
<a name="l00654"></a>00654     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;foo/&gt;&#39;</span>)-&gt;append($simp);
<a name="l00655"></a>00655     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;find(<span class="stringliteral">&#39;root&#39;</span>)-&gt;size());
<a name="l00656"></a>00656     
<a name="l00657"></a>00657     <span class="comment">// Test with replace entities turned on:</span>
<a name="l00658"></a>00658     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;root&#39;</span>, array(<span class="stringliteral">&#39;replace_entities&#39;</span> =&gt; TRUE))-&gt;append(<span class="stringliteral">&#39;&lt;p&gt;&amp;raquo;&lt;/p&gt;&#39;</span>);
<a name="l00659"></a>00659     <span class="comment">// Note that we are using a UTF-8  character, not an ASCII 187. This seems to cause</span>
<a name="l00660"></a>00660     <span class="comment">// problems on some Windows IDEs. So here we do it the ugly way.</span>
<a name="l00661"></a>00661     $utf8raquo = <span class="stringliteral">&#39;&lt;p&gt;&#39;</span> . mb_convert_encoding(chr(187), <span class="stringliteral">&#39;utf-8&#39;</span>, <span class="stringliteral">&#39;iso8859-1&#39;</span>) . <span class="stringliteral">&#39;&lt;/p&gt;&#39;</span>;
<a name="l00662"></a>00662     <span class="comment">//$this-&gt;assertEquals(&#39;&lt;p&gt;&lt;/p&gt;&#39;, $qp-&gt;find(&#39;p&#39;)-&gt;html(), &#39;Entities are decoded to UTF-8 correctly.&#39;);</span>
<a name="l00663"></a>00663     $this-&gt;assertEquals($utf8raquo, $qp-&gt;find(<span class="charliteral">&#39;p&#39;</span>)-&gt;html(), <span class="stringliteral">&#39;Entities are decoded to UTF-8 correctly.&#39;</span>);
<a name="l00664"></a>00664     
<a name="l00665"></a>00665     <span class="comment">// Test with empty, mainly to make sure it doesn&#39;t explode.</span>
<a name="l00666"></a>00666     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;append(<span class="stringliteral">&#39;&#39;</span>) instanceof <a class="code" href="class_query_path.html" title="The Query Path object is the primary tool in this library.">QueryPath</a>);
<a name="l00667"></a>00667   }
<a name="l00668"></a>00668   <span class="comment"></span>
<a name="l00669"></a>00669 <span class="comment">  /**</span>
<a name="l00670"></a>00670 <span class="comment">   * @expectedException QueryPathParseException</span>
<a name="l00671"></a>00671 <span class="comment">   */</span>
<a name="l00672"></a><a class="code" href="class_query_path_test.html#aff1df690d0c01cd4910503f2287cf085">00672</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#aff1df690d0c01cd4910503f2287cf085" title="QueryPathParseException">testAppendBadMarkup</a>() {
<a name="l00673"></a>00673     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00674"></a>00674     <span class="keywordflow">try</span>{
<a name="l00675"></a>00675       <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;root&#39;</span>)-&gt;append(<span class="stringliteral">&#39;&lt;foo&gt;&lt;bar&gt;&lt;/foo&gt;&#39;</span>);
<a name="l00676"></a>00676     }
<a name="l00677"></a>00677     <span class="keywordflow">catch</span> (Exception $e) {
<a name="l00678"></a>00678       <span class="comment">//print $e-&gt;getMessage();</span>
<a name="l00679"></a>00679       <span class="keywordflow">throw</span> $e;
<a name="l00680"></a>00680     }
<a name="l00681"></a>00681   }
<a name="l00682"></a>00682   <span class="comment"></span>
<a name="l00683"></a>00683 <span class="comment">  /**</span>
<a name="l00684"></a>00684 <span class="comment">    * @expectedException QueryPathException</span>
<a name="l00685"></a>00685 <span class="comment">    */</span>
<a name="l00686"></a><a class="code" href="class_query_path_test.html#aa94baadd79b66f49e7ac065dc6ab5cf8">00686</a>    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#aa94baadd79b66f49e7ac065dc6ab5cf8" title="QueryPathException">testAppendBadObject</a>() {
<a name="l00687"></a>00687      <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00688"></a>00688      <span class="keywordflow">try</span>{
<a name="l00689"></a>00689        <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;root&#39;</span>)-&gt;append(<span class="keyword">new</span> stdClass);
<a name="l00690"></a>00690      }
<a name="l00691"></a>00691      <span class="keywordflow">catch</span> (Exception $e) {
<a name="l00692"></a>00692        <span class="comment">//print $e-&gt;getMessage();</span>
<a name="l00693"></a>00693        <span class="keywordflow">throw</span> $e;
<a name="l00694"></a>00694      }
<a name="l00695"></a>00695    }
<a name="l00696"></a>00696   
<a name="l00697"></a><a class="code" href="class_query_path_test.html#a45d11f7c2789968e9d50b057e307b330">00697</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a45d11f7c2789968e9d50b057e307b330">testAppendTo</a>() {
<a name="l00698"></a>00698     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00699"></a>00699     $dest = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;dest/&gt;&lt;/root&gt;&#39;</span>, <span class="stringliteral">&#39;dest&#39;</span>);
<a name="l00700"></a>00700     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;li&#39;</span>)-&gt;appendTo($dest);
<a name="l00701"></a>00701     $this-&gt;assertEquals(5, $dest-&gt;find(<span class="stringliteral">&#39;:root li&#39;</span>)-&gt;size());
<a name="l00702"></a>00702   }
<a name="l00703"></a>00703   
<a name="l00704"></a><a class="code" href="class_query_path_test.html#a162b8ee3b62e985845a9036aec41c2f0">00704</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a162b8ee3b62e985845a9036aec41c2f0">testPrepend</a>() {
<a name="l00705"></a>00705     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00706"></a>00706     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;unary&#39;</span>)-&gt;prepend(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;find(<span class="stringliteral">&#39;:root &gt; unary &gt; test&#39;</span>)-&gt;size());
<a name="l00707"></a>00707     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;prepend(<span class="stringliteral">&#39;&lt;li id=&quot;appended&quot;/&gt;&#39;</span>)-&gt;find(<span class="stringliteral">&#39;#appended&#39;</span>);
<a name="l00708"></a>00708     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size());
<a name="l00709"></a>00709     $this-&gt;assertNull(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0)-&gt;previousSibling);
<a name="l00710"></a>00710     
<a name="l00711"></a>00711     <span class="comment">// Test repeated insert</span>
<a name="l00712"></a>00712     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;inner&#39;</span>)-&gt;prepend(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;top()-&gt;find(<span class="stringliteral">&#39;test&#39;</span>)-&gt;size());
<a name="l00713"></a>00713   }
<a name="l00714"></a>00714   
<a name="l00715"></a><a class="code" href="class_query_path_test.html#a6b2cf5eae6ab82d59ad25d6218ee2ec8">00715</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a6b2cf5eae6ab82d59ad25d6218ee2ec8">testPrependTo</a>() {
<a name="l00716"></a>00716     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00717"></a>00717     $dest = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;dest/&gt;&lt;/root&gt;&#39;</span>, <span class="stringliteral">&#39;dest&#39;</span>);
<a name="l00718"></a>00718     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;li&#39;</span>)-&gt;prependTo($dest);
<a name="l00719"></a>00719     $this-&gt;assertEquals(5, $dest-&gt;find(<span class="stringliteral">&#39;:root li&#39;</span>)-&gt;size());
<a name="l00720"></a>00720   }
<a name="l00721"></a>00721   
<a name="l00722"></a><a class="code" href="class_query_path_test.html#a8ff4a7818d8dbf0d453a345d060e0632">00722</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a8ff4a7818d8dbf0d453a345d060e0632">testBefore</a>() {
<a name="l00723"></a>00723     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00724"></a>00724     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;unary&#39;</span>)-&gt;before(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;find(<span class="stringliteral">&#39;:root &gt; head ~ test&#39;</span>)-&gt;size());
<a name="l00725"></a>00725     $this-&gt;assertEquals(<span class="stringliteral">&#39;unary&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;unary&#39;</span>)-&gt;before(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;find(<span class="stringliteral">&#39;:root &gt; test&#39;</span>)-&gt;<span class="keyword">get</span>(0)-&gt;nextSibling-&gt;tagName);
<a name="l00726"></a>00726     
<a name="l00727"></a>00727     <span class="comment">// Test repeated insert</span>
<a name="l00728"></a>00728     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;inner&#39;</span>)-&gt;before(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;top()-&gt;find(<span class="stringliteral">&#39;test&#39;</span>)-&gt;size());
<a name="l00729"></a>00729   }
<a name="l00730"></a>00730   
<a name="l00731"></a><a class="code" href="class_query_path_test.html#ae828f4d11e91b893251e8fdd4b4c89a9">00731</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ae828f4d11e91b893251e8fdd4b4c89a9">testAfter</a>() {
<a name="l00732"></a>00732     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00733"></a>00733     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;unary&#39;</span>)-&gt;after(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;find(<span class="stringliteral">&#39;:root &gt; unary ~ test&#39;</span>)-&gt;size());
<a name="l00734"></a>00734     $this-&gt;assertEquals(<span class="stringliteral">&#39;unary&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;unary&#39;</span>)-&gt;after(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;find(<span class="stringliteral">&#39;:root &gt; test&#39;</span>)-&gt;<span class="keyword">get</span>(0)-&gt;previousSibling-&gt;tagName);
<a name="l00735"></a>00735     
<a name="l00736"></a>00736     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;inner&#39;</span>)-&gt;after(<span class="stringliteral">&#39;&lt;test/&gt;&#39;</span>)-&gt;top()-&gt;find(<span class="stringliteral">&#39;test&#39;</span>)-&gt;size());
<a name="l00737"></a>00737     
<a name="l00738"></a>00738   }
<a name="l00739"></a>00739   
<a name="l00740"></a><a class="code" href="class_query_path_test.html#a25dd1ff36ca84b50ae87ce9a37c70c3e">00740</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a25dd1ff36ca84b50ae87ce9a37c70c3e">testInsertBefore</a>() {
<a name="l00741"></a>00741     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00742"></a>00742     $dest = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;dest/&gt;&lt;/root&gt;&#39;</span>, <span class="stringliteral">&#39;dest&#39;</span>);
<a name="l00743"></a>00743     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;li&#39;</span>)-&gt;insertBefore($dest);
<a name="l00744"></a>00744     $this-&gt;assertEquals(5, $dest-&gt;find(<span class="stringliteral">&#39;:root &gt; li&#39;</span>)-&gt;size());
<a name="l00745"></a>00745     $this-&gt;assertEquals(<span class="stringliteral">&#39;li&#39;</span>, $dest-&gt;end()-&gt;find(<span class="stringliteral">&#39;dest&#39;</span>)-&gt;get(0)-&gt;previousSibling-&gt;tagName);
<a name="l00746"></a>00746   }
<a name="l00747"></a><a class="code" href="class_query_path_test.html#a05b8e90f893d431c2714b9842ac87aff">00747</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a05b8e90f893d431c2714b9842ac87aff">testInsertAfter</a>() {
<a name="l00748"></a>00748     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00749"></a>00749     $dest = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;dest/&gt;&lt;/root&gt;&#39;</span>, <span class="stringliteral">&#39;dest&#39;</span>);
<a name="l00750"></a>00750     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;li&#39;</span>)-&gt;insertAfter($dest);
<a name="l00751"></a>00751     <span class="comment">//print $dest-&gt;get(0)-&gt;ownerDocument-&gt;saveXML();</span>
<a name="l00752"></a>00752     $this-&gt;assertEquals(5, $dest-&gt;find(<span class="stringliteral">&#39;:root &gt; li&#39;</span>)-&gt;size());
<a name="l00753"></a>00753   }
<a name="l00754"></a><a class="code" href="class_query_path_test.html#abd2b59641878e0fb2ec59c3906298555">00754</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#abd2b59641878e0fb2ec59c3906298555">testReplaceWith</a>() {
<a name="l00755"></a>00755     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00756"></a>00756     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;unary&#39;</span>)-&gt;replaceWith(<span class="stringliteral">&#39;&lt;test&gt;&lt;foo/&gt;&lt;/test&gt;&#39;</span>)-&gt;find(<span class="stringliteral">&#39;:root test&#39;</span>);
<a name="l00757"></a>00757     <span class="comment">//print $qp-&gt;get(0)-&gt;ownerDocument-&gt;saveXML();</span>
<a name="l00758"></a>00758     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size());
<a name="l00759"></a>00759   }
<a name="l00760"></a>00760   
<a name="l00761"></a><a class="code" href="class_query_path_test.html#aa6419ce91d711fdd233ff1d5a68a33dc">00761</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#aa6419ce91d711fdd233ff1d5a68a33dc">testReplaceAll</a>() {
<a name="l00762"></a>00762     $qp1 = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;l/&gt;&lt;l/&gt;&lt;/root&gt;&#39;</span>);
<a name="l00763"></a>00763     <a class="code" href="odt_8php.html#afc5e9ce512cd97cf2e0e25bb20dcd39b">$doc</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;bob&gt;&lt;m/&gt;&lt;m/&gt;&lt;/bob&gt;&#39;</span>)-&gt;get(0)-&gt;ownerDocument;
<a name="l00764"></a>00764     
<a name="l00765"></a>00765     $qp2 = $qp1-&gt;find(<span class="charliteral">&#39;l&#39;</span>)-&gt;replaceAll(<span class="charliteral">&#39;m&#39;</span>, <a class="code" href="odt_8php.html#afc5e9ce512cd97cf2e0e25bb20dcd39b">$doc</a>);
<a name="l00766"></a>00766     
<a name="l00767"></a>00767     $this-&gt;assertEquals(2, $qp2-&gt;top()-&gt;find(<span class="charliteral">&#39;l&#39;</span>)-&gt;size());
<a name="l00768"></a>00768   }
<a name="l00769"></a>00769   
<a name="l00770"></a><a class="code" href="class_query_path_test.html#ac50932368531e3ed3039a3d80f027401">00770</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ac50932368531e3ed3039a3d80f027401">testUnwrap</a>() {
<a name="l00771"></a>00771     
<a name="l00772"></a>00772     <span class="comment">// Unwrap center, and make sure junk goes away.</span>
<a name="l00773"></a>00773     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;wrapper&gt;&lt;center/&gt;&lt;junk/&gt;&lt;/wrapper&gt;&lt;/root&gt;&#39;</span>;
<a name="l00774"></a>00774     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;center&#39;</span>)-&gt;unwrap();
<a name="l00775"></a>00775     $this-&gt;assertEquals(<span class="stringliteral">&#39;root&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top(<span class="stringliteral">&#39;center&#39;</span>)-&gt;parent()-&gt;tag());
<a name="l00776"></a>00776     $this-&gt;assertEquals(0, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top(<span class="stringliteral">&#39;junk&#39;</span>)-&gt;size());
<a name="l00777"></a>00777     
<a name="l00778"></a>00778     <span class="comment">// Make sure it works on two nodes in the same parent.</span>
<a name="l00779"></a>00779     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;wrapper&gt;&lt;center id=&quot;1&quot;/&gt;&lt;center id=&quot;2&quot;/&gt;&lt;/wrapper&gt;&lt;/root&gt;&#39;</span>;
<a name="l00780"></a>00780     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;center&#39;</span>)-&gt;unwrap();
<a name="l00781"></a>00781     
<a name="l00782"></a>00782     <span class="comment">// Make sure they were unwrapped</span>
<a name="l00783"></a>00783     $this-&gt;assertEquals(<span class="stringliteral">&#39;root&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top(<span class="stringliteral">&#39;center&#39;</span>)-&gt;parent()-&gt;tag());
<a name="l00784"></a>00784     
<a name="l00785"></a>00785     <span class="comment">// Make sure both get copied.</span>
<a name="l00786"></a>00786     $this-&gt;assertEquals(2, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top(<span class="stringliteral">&#39;center&#39;</span>)-&gt;size());
<a name="l00787"></a>00787 
<a name="l00788"></a>00788     <span class="comment">// Make sure they are in order.</span>
<a name="l00789"></a>00789     $this-&gt;assertEquals(<span class="charliteral">&#39;2&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top(<span class="stringliteral">&#39;center:last&#39;</span>)-&gt;attr(<span class="stringliteral">&#39;id&#39;</span>));
<a name="l00790"></a>00790     
<a name="l00791"></a>00791     <span class="comment">// Test on root element.</span>
<a name="l00792"></a>00792     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;center/&gt;&lt;/root&gt;&#39;</span>;
<a name="l00793"></a>00793     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;center&#39;</span>)-&gt;unwrap();
<a name="l00794"></a>00794     $this-&gt;assertEquals(<span class="stringliteral">&#39;center&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top()-&gt;tag());
<a name="l00795"></a>00795     
<a name="l00796"></a>00796   }
<a name="l00797"></a>00797   <span class="comment"></span>
<a name="l00798"></a>00798 <span class="comment">  /**</span>
<a name="l00799"></a>00799 <span class="comment">   * @expectedException QueryPathException</span>
<a name="l00800"></a>00800 <span class="comment">   */</span>
<a name="l00801"></a><a class="code" href="class_query_path_test.html#ad45e385d5dab66566cdf0576441bf175">00801</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ad45e385d5dab66566cdf0576441bf175" title="QueryPathException">testFailedUnwrap</a>() {
<a name="l00802"></a>00802     <span class="comment">// Cannot unwrap the root element.</span>
<a name="l00803"></a>00803     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;/root&gt;&#39;</span>;
<a name="l00804"></a>00804     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;root&#39;</span>)-&gt;unwrap();
<a name="l00805"></a>00805     $this-&gt;assertEquals(<span class="stringliteral">&#39;center&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top()-&gt;tag());
<a name="l00806"></a>00806   }
<a name="l00807"></a>00807   
<a name="l00808"></a><a class="code" href="class_query_path_test.html#ac485e29a7071271d5f6ec01dfd909331">00808</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ac485e29a7071271d5f6ec01dfd909331">testWrap</a>() {
<a name="l00809"></a>00809     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00810"></a>00810     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;unary&#39;</span>)-&gt;wrap(<span class="stringliteral">&#39;&#39;</span>);
<a name="l00811"></a>00811     $this-&gt;assertTrue($xml instanceof <a class="code" href="class_query_path.html" title="The Query Path object is the primary tool in this library.">QueryPath</a>);
<a name="l00812"></a>00812     
<a name="l00813"></a>00813     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;unary&#39;</span>)-&gt;wrap(<span class="stringliteral">&#39;&lt;test id=&quot;testWrap&quot;&gt;&lt;/test&gt;&#39;</span>)-&gt;get(0)-&gt;ownerDocument-&gt;saveXML();
<a name="l00814"></a>00814     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;#testWrap&#39;</span>)-&gt;<span class="keyword">get</span>(0)-&gt;childNodes-&gt;length);
<a name="l00815"></a>00815     
<a name="l00816"></a>00816     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;li&#39;</span>)-&gt;wrap(<span class="stringliteral">&#39;&lt;test class=&quot;testWrap&quot;&gt;&lt;/test&gt;&#39;</span>)-&gt;get(0)-&gt;ownerDocument-&gt;saveXML();
<a name="l00817"></a>00817     $this-&gt;assertEquals(5, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;.testWrap&#39;</span>)-&gt;size());
<a name="l00818"></a>00818     
<a name="l00819"></a>00819     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;li&#39;</span>)-&gt;wrap(<span class="stringliteral">&#39;&lt;test class=&quot;testWrap&quot;&gt;&lt;inside&gt;&lt;center/&gt;&lt;/inside&gt;&lt;/test&gt;&#39;</span>)-&gt;get(0)-&gt;ownerDocument-&gt;saveXML();
<a name="l00820"></a>00820     $this-&gt;assertEquals(5, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;.testWrap &gt; inside &gt; center &gt; li&#39;</span>)-&gt;size());
<a name="l00821"></a>00821   }
<a name="l00822"></a>00822   
<a name="l00823"></a><a class="code" href="class_query_path_test.html#adc642f85470493c7e509c9b9410ddd32">00823</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#adc642f85470493c7e509c9b9410ddd32">testWrapAll</a>() {
<a name="l00824"></a>00824     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00825"></a>00825     
<a name="l00826"></a>00826     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;unary&#39;</span>)-&gt;wrapAll(<span class="stringliteral">&#39;&#39;</span>);
<a name="l00827"></a>00827     $this-&gt;assertTrue($xml instanceof <a class="code" href="class_query_path.html" title="The Query Path object is the primary tool in this library.">QueryPath</a>);
<a name="l00828"></a>00828     
<a name="l00829"></a>00829     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;unary&#39;</span>)-&gt;wrapAll(<span class="stringliteral">&#39;&lt;test id=&quot;testWrap&quot;&gt;&lt;/test&gt;&#39;</span>)-&gt;get(0)-&gt;ownerDocument-&gt;saveXML();
<a name="l00830"></a>00830     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;#testWrap&#39;</span>)-&gt;<span class="keyword">get</span>(0)-&gt;childNodes-&gt;length);
<a name="l00831"></a>00831     
<a name="l00832"></a>00832     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;li&#39;</span>)-&gt;wrapAll(<span class="stringliteral">&#39;&lt;test class=&quot;testWrap&quot;&gt;&lt;inside&gt;&lt;center/&gt;&lt;/inside&gt;&lt;/test&gt;&#39;</span>)-&gt;get(0)-&gt;ownerDocument-&gt;saveXML();
<a name="l00833"></a>00833     $this-&gt;assertEquals(5, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;.testWrap &gt; inside &gt; center &gt; li&#39;</span>)-&gt;size());
<a name="l00834"></a>00834     
<a name="l00835"></a>00835   }
<a name="l00836"></a>00836   
<a name="l00837"></a><a class="code" href="class_query_path_test.html#a52f2d590db40d1eb22778427083deaa7">00837</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a52f2d590db40d1eb22778427083deaa7">testWrapInner</a>() {
<a name="l00838"></a>00838     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00839"></a>00839     
<a name="l00840"></a>00840     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;wrapInner(<span class="stringliteral">&#39;&#39;</span>) instanceof <a class="code" href="class_query_path.html" title="The Query Path object is the primary tool in this library.">QueryPath</a>);
<a name="l00841"></a>00841     
<a name="l00842"></a>00842     $xml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>,<span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;wrapInner(<span class="stringliteral">&#39;&lt;test class=&quot;testWrap&quot;&gt;&lt;/test&gt;&#39;</span>)-&gt;get(0)-&gt;ownerDocument-&gt;saveXML();
<a name="l00843"></a>00843     <span class="comment">// FIXME: 9 includes text nodes. Should fix this.</span>
<a name="l00844"></a>00844     $this-&gt;assertEquals(9, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;.testWrap&#39;</span>)-&gt;<span class="keyword">get</span>(0)-&gt;childNodes-&gt;length);
<a name="l00845"></a>00845   }
<a name="l00846"></a>00846   
<a name="l00847"></a><a class="code" href="class_query_path_test.html#a0ad702724b88f72d70f449dd7a9dc5d7">00847</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a0ad702724b88f72d70f449dd7a9dc5d7">testRemove</a>() {
<a name="l00848"></a>00848     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00849"></a>00849     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>);
<a name="l00850"></a>00850     $start = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size();
<a name="l00851"></a>00851     $finish = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;remove()-&gt;size();
<a name="l00852"></a>00852     $this-&gt;assertEquals($start, $finish);
<a name="l00853"></a>00853     $this-&gt;assertEquals(0, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;find(<span class="stringliteral">&#39;:root li&#39;</span>)-&gt;size());
<a name="l00854"></a>00854     
<a name="l00855"></a>00855     <span class="comment">// Test for Issue #55</span>
<a name="l00856"></a>00856     <a class="code" href="docx_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a> = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;a&gt;test&lt;/a&gt;&lt;b&gt; FAIL&lt;/b&gt;&lt;/root&gt;&#39;</span>;
<a name="l00857"></a>00857     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($data);
<a name="l00858"></a>00858     $rem = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;remove(<span class="charliteral">&#39;b&#39;</span>);
<a name="l00859"></a>00859     
<a name="l00860"></a>00860     
<a name="l00861"></a>00861     $this-&gt;assertEquals(<span class="stringliteral">&#39; FAIL&#39;</span>, $rem-&gt;text());
<a name="l00862"></a>00862     $this-&gt;assertEquals(<span class="stringliteral">&#39;test&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;text());
<a name="l00863"></a>00863 
<a name="l00864"></a>00864     <span class="comment">// Test for Issue #63</span>
<a name="l00865"></a>00865     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($data);
<a name="l00866"></a>00866     $rem = $qp-&gt;remove(<span class="stringliteral">&#39;noSuchElement&#39;</span>);
<a name="l00867"></a>00867     $this-&gt;assertEquals(0, count($rem));
<a name="l00868"></a>00868   }
<a name="l00869"></a>00869   
<a name="l00870"></a><a class="code" href="class_query_path_test.html#ace50a9a5c268318c64ab8527bcbc414b">00870</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ace50a9a5c268318c64ab8527bcbc414b">testHasClass</a>() {
<a name="l00871"></a>00871     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00872"></a>00872     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;hasClass(<span class="stringliteral">&#39;innerClass&#39;</span>));
<a name="l00873"></a>00873     
<a name="l00874"></a>00874     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00875"></a>00875     $this-&gt;assertFalse(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;hasClass(<span class="stringliteral">&#39;noSuchClass&#39;</span>));
<a name="l00876"></a>00876   }
<a name="l00877"></a>00877   
<a name="l00878"></a><a class="code" href="class_query_path_test.html#aa70055bafd940d9ae6e82192ace38673">00878</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#aa70055bafd940d9ae6e82192ace38673">testAddClass</a>() {
<a name="l00879"></a>00879     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00880"></a>00880     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;addClass(<span class="stringliteral">&#39;testClass&#39;</span>)-&gt;hasClass(<span class="stringliteral">&#39;testClass&#39;</span>));
<a name="l00881"></a>00881   }
<a name="l00882"></a><a class="code" href="class_query_path_test.html#a6ff9626a9620ba8cc1054c896c77b49e">00882</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a6ff9626a9620ba8cc1054c896c77b49e">testRemoveClass</a>() {
<a name="l00883"></a>00883     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00884"></a>00884     <span class="comment">// The add class tests to make sure that this works with multiple values.</span>
<a name="l00885"></a>00885     $this-&gt;assertFalse(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;removeClass(<span class="stringliteral">&#39;innerClass&#39;</span>)-&gt;hasClass(<span class="stringliteral">&#39;innerClass&#39;</span>));
<a name="l00886"></a>00886     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;addClass(<span class="stringliteral">&#39;testClass&#39;</span>)-&gt;removeClass(<span class="stringliteral">&#39;innerClass&#39;</span>)-&gt;hasClass(<span class="stringliteral">&#39;testClass&#39;</span>));
<a name="l00887"></a>00887   }
<a name="l00888"></a>00888   
<a name="l00889"></a><a class="code" href="class_query_path_test.html#a06ce9759c6314f56fd49dfafe08e3e5e">00889</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a06ce9759c6314f56fd49dfafe08e3e5e">testAdd</a>() {
<a name="l00890"></a>00890     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00891"></a>00891     $this-&gt;assertEquals(7, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;add(<span class="stringliteral">&#39;inner&#39;</span>)-&gt;size());
<a name="l00892"></a>00892   }
<a name="l00893"></a>00893   
<a name="l00894"></a><a class="code" href="class_query_path_test.html#a221dc27c249b9f6b8523ebe7eb26724e">00894</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a221dc27c249b9f6b8523ebe7eb26724e">testEnd</a>() {
<a name="l00895"></a>00895     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00896"></a>00896     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;end()-&gt;size());
<a name="l00897"></a>00897   }
<a name="l00898"></a>00898   
<a name="l00899"></a><a class="code" href="class_query_path_test.html#a62d488126f578859530795698ff5e027">00899</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a62d488126f578859530795698ff5e027">testAndSelf</a>() {
<a name="l00900"></a>00900     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00901"></a>00901     $this-&gt;assertEquals(7, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;andSelf()-&gt;size());
<a name="l00902"></a>00902   }
<a name="l00903"></a>00903   
<a name="l00904"></a><a class="code" href="class_query_path_test.html#aad8781f6e9458cce332bdada74315bcf">00904</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#aad8781f6e9458cce332bdada74315bcf">testChildren</a>() {
<a name="l00905"></a>00905     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00906"></a>00906     $this-&gt;assertEquals(5, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;children()-&gt;size());
<a name="l00907"></a>00907     $this-&gt;assertEquals(5, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;children(<span class="stringliteral">&#39;li&#39;</span>)-&gt;size());
<a name="l00908"></a>00908     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;:root&#39;</span>)-&gt;children(<span class="stringliteral">&#39;unary&#39;</span>)-&gt;size());
<a name="l00909"></a>00909   }
<a name="l00910"></a><a class="code" href="class_query_path_test.html#a89e6f40acc4f0dbd0a789ff5edd52dff">00910</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a89e6f40acc4f0dbd0a789ff5edd52dff">testRemoveChildren</a>() {
<a name="l00911"></a>00911     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00912"></a>00912     $this-&gt;assertEquals(0, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;removeChildren()-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;size());
<a name="l00913"></a>00913   }
<a name="l00914"></a>00914   
<a name="l00915"></a><a class="code" href="class_query_path_test.html#af7ab530326c61b973a4e6d4e3c428eaa">00915</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#af7ab530326c61b973a4e6d4e3c428eaa">testContents</a>() {
<a name="l00916"></a>00916     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00917"></a>00917     $this-&gt;assertGreaterThan(5, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;contents()-&gt;size());
<a name="l00918"></a>00918     <span class="comment">// Two cdata nodes and one element node.</span>
<a name="l00919"></a>00919     $this-&gt;assertEquals(3, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-two&#39;</span>)-&gt;contents()-&gt;size());
<a name="l00920"></a>00920     
<a name="l00921"></a>00921     <span class="comment">// Issue #51: Under certain recursive conditions, this returns error.</span>
<a name="l00922"></a>00922     <span class="comment">// Warning: Whitespace is important in the markup beneath.</span>
<a name="l00923"></a>00923     $xml = <span class="stringliteral">&#39;&lt;html&gt;&lt;body&gt;&lt;div&gt;Hello</span>
<a name="l00924"></a>00924 <span class="stringliteral">        &lt;div&gt;how are you</span>
<a name="l00925"></a>00925 <span class="stringliteral">          &lt;div&gt;fine thank you</span>
<a name="l00926"></a>00926 <span class="stringliteral">            &lt;div&gt;and you ?&lt;/div&gt;</span>
<a name="l00927"></a>00927 <span class="stringliteral">          &lt;/div&gt;</span>
<a name="l00928"></a>00928 <span class="stringliteral">        &lt;/div&gt;</span>
<a name="l00929"></a>00929 <span class="stringliteral">      &lt;/div&gt;</span>
<a name="l00930"></a>00930 <span class="stringliteral">    &lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l00931"></a>00931     $this-&gt;assertEquals(7, count($this-&gt;contentsRecurse(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml))));
<a name="l00932"></a>00932   }
<a name="l00933"></a>00933   <span class="comment"></span>
<a name="l00934"></a>00934 <span class="comment">  /**</span>
<a name="l00935"></a>00935 <span class="comment">   * Helper function for testContents().</span>
<a name="l00936"></a>00936 <span class="comment">   * Based on problem reported in issue 51.</span>
<a name="l00937"></a>00937 <span class="comment">   */</span>
<a name="l00938"></a>00938   <span class="keyword">private</span> <span class="keyword">function</span> contentsRecurse($source, &amp;$pack = array()) {
<a name="l00939"></a>00939     $children = $source-&gt;contents();
<a name="l00940"></a>00940     $pack[] = $source-&gt;html();
<a name="l00941"></a>00941     
<a name="l00942"></a>00942     <span class="keywordflow">foreach</span> ($children as $child) {
<a name="l00943"></a>00943       $pack += $this-&gt;contentsRecurse($source, $pack);
<a name="l00944"></a>00944     }
<a name="l00945"></a>00945     
<a name="l00946"></a>00946     <span class="keywordflow">return</span> $pack;
<a name="l00947"></a>00947   }
<a name="l00948"></a>00948   
<a name="l00949"></a><a class="code" href="class_query_path_test.html#a810d97dcd54075d874ed3c06734e244a">00949</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a810d97dcd54075d874ed3c06734e244a">testSiblings</a>() {
<a name="l00950"></a>00950     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00951"></a>00951     $this-&gt;assertEquals(3, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#one&#39;</span>)-&gt;siblings()-&gt;size());
<a name="l00952"></a>00952     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;siblings(<span class="stringliteral">&#39;inner&#39;</span>)-&gt;size());
<a name="l00953"></a>00953   }
<a name="l00954"></a>00954   
<a name="l00955"></a><a class="code" href="class_query_path_test.html#a839919176af74be3c5b83efaa2126987">00955</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a839919176af74be3c5b83efaa2126987">testXinclude</a>() {
<a name="l00956"></a>00956     
<a name="l00957"></a>00957   }
<a name="l00958"></a>00958   
<a name="l00959"></a><a class="code" href="class_query_path_test.html#a03a6f42b09e819f50a9fb41b4453d768">00959</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a03a6f42b09e819f50a9fb41b4453d768">testHTML</a>() {
<a name="l00960"></a>00960     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l00961"></a>00961     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>);
<a name="l00962"></a>00962     $html = <span class="stringliteral">&#39;&lt;b&gt;test&lt;/b&gt;&#39;</span>;
<a name="l00963"></a>00963     $this-&gt;assertEquals($html, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;html($html)-&gt;find(<span class="charliteral">&#39;b&#39;</span>)-&gt;html());
<a name="l00964"></a>00964     
<a name="l00965"></a>00965     $html = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;foo&lt;/title&gt;&lt;/head&gt;&lt;body&gt;bar&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l00966"></a>00966     <span class="comment">// We expect a DocType to be prepended:</span>
<a name="l00967"></a>00967     $this-&gt;assertEquals(<span class="stringliteral">&#39;&lt;!DOCTYPE&#39;</span>, substr(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($html)-&gt;html(), 0, 9));
<a name="l00968"></a>00968     
<a name="l00969"></a>00969     <span class="comment">// Check that HTML is not added to empty finds. Note the # is for a special </span>
<a name="l00970"></a>00970     <span class="comment">// case.</span>
<a name="l00971"></a>00971     $this-&gt;assertEquals(<span class="stringliteral">&#39;&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($html, <span class="stringliteral">&#39;#nonexistant&#39;</span>)-&gt;html(<span class="stringliteral">&#39;&lt;p&gt;Hello&lt;/p&gt;&#39;</span>)-&gt;html());
<a name="l00972"></a>00972     $this-&gt;assertEquals(<span class="stringliteral">&#39;&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($html, <span class="stringliteral">&#39;nonexistant&#39;</span>)-&gt;html(<span class="stringliteral">&#39;&lt;p&gt;Hello&lt;/p&gt;&#39;</span>)-&gt;html());
<a name="l00973"></a>00973     
<a name="l00974"></a>00974     <span class="comment">// We expect NULL if the document is empty.</span>
<a name="l00975"></a>00975     $this-&gt;assertNull(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>()-&gt;html());
<a name="l00976"></a>00976     
<a name="l00977"></a>00977     <span class="comment">// Non-DOMNodes should not be rendered:</span>
<a name="l00978"></a>00978     $fn = <span class="stringliteral">&#39;mapCallbackFunction&#39;</span>;
<a name="l00979"></a>00979     $this-&gt;assertNull(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;map(array($this, $fn))-&gt;html());
<a name="l00980"></a>00980   }
<a name="l00981"></a>00981   
<a name="l00982"></a><a class="code" href="class_query_path_test.html#abce02421b75b6c61e05da1c189782f1a">00982</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#abce02421b75b6c61e05da1c189782f1a">testInnerHTML</a>() {
<a name="l00983"></a>00983     $html = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&quot;me&quot;&gt;Test&lt;p&gt;Again&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l00984"></a>00984     
<a name="l00985"></a>00985     $this-&gt;assertEquals(<span class="stringliteral">&#39;Test&lt;p&gt;Again&lt;/p&gt;&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($html,<span class="stringliteral">&#39;#me&#39;</span>)-&gt;innerHTML());
<a name="l00986"></a>00986   }
<a name="l00987"></a>00987   
<a name="l00988"></a><a class="code" href="class_query_path_test.html#a929102812e31de3468691ff77944aceb">00988</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a929102812e31de3468691ff77944aceb">testInnerXML</a>() {
<a name="l00989"></a>00989     $html = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div id=&quot;me&quot;&gt;Test&lt;p&gt;Again1&lt;/p&gt;&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l00990"></a>00990     $test = <span class="stringliteral">&#39;Test&lt;p&gt;Again1&lt;/p&gt;&#39;</span>;
<a name="l00991"></a>00991     
<a name="l00992"></a>00992     $this-&gt;assertEquals($test, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($html,<span class="stringliteral">&#39;#me&#39;</span>)-&gt;innerXML());
<a name="l00993"></a>00993     
<a name="l00994"></a>00994     $html = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div id=&quot;me&quot;&gt;Test&lt;p&gt;Again2&lt;br/&gt;&lt;/p&gt;&lt;![CDATA[Hello]]&gt;&lt;?pi foo ?&gt;&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l00995"></a>00995     $test = <span class="stringliteral">&#39;Test&lt;p&gt;Again2&lt;br/&gt;&lt;/p&gt;&lt;![CDATA[Hello]]&gt;&lt;?pi foo ?&gt;&#39;</span>;
<a name="l00996"></a>00996     
<a name="l00997"></a>00997     $this-&gt;assertEquals($test, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($html,<span class="stringliteral">&#39;#me&#39;</span>)-&gt;innerXML());
<a name="l00998"></a>00998     
<a name="l00999"></a>00999     $html = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div id=&quot;me&quot;/&gt;&lt;/root&gt;&#39;</span>;
<a name="l01000"></a>01000     $test = <span class="stringliteral">&#39;&#39;</span>;
<a name="l01001"></a>01001     $this-&gt;assertEquals($test, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($html,<span class="stringliteral">&#39;#me&#39;</span>)-&gt;innerXML());
<a name="l01002"></a>01002     
<a name="l01003"></a>01003     $html = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root id=&quot;me&quot;&gt;test&lt;/root&gt;&#39;</span>;
<a name="l01004"></a>01004     $test = <span class="stringliteral">&#39;test&#39;</span>;
<a name="l01005"></a>01005     $this-&gt;assertEquals($test, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($html,<span class="stringliteral">&#39;#me&#39;</span>)-&gt;innerXML());
<a name="l01006"></a>01006   }
<a name="l01007"></a>01007   
<a name="l01008"></a><a class="code" href="class_query_path_test.html#a2abf0043b1b20d9c7a81927282f0ebfa">01008</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a2abf0043b1b20d9c7a81927282f0ebfa">testInnerXHTML</a>() {
<a name="l01009"></a>01009     $html = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&quot;me&quot;&gt;Test&lt;p&gt;Again&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01010"></a>01010     
<a name="l01011"></a>01011     $this-&gt;assertEquals(<span class="stringliteral">&#39;Test&lt;p&gt;Again&lt;/p&gt;&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($html,<span class="stringliteral">&#39;#me&#39;</span>)-&gt;innerXHTML());
<a name="l01012"></a>01012     
<a name="l01013"></a>01013     <span class="comment">// Regression for issue #10: Tags should not be unary (e.g. we want &lt;script&gt;&lt;/script&gt;, not &lt;script/&gt;)</span>
<a name="l01014"></a>01014     $xml = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;foo&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&quot;me&quot;&gt;Test&lt;p&gt;Again&lt;br/&gt;&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01015"></a>01015     <span class="comment">// Look for a closing &lt;/br&gt; tag</span>
<a name="l01016"></a>01016     $regex = <span class="stringliteral">&#39;/&lt;\/br&gt;/&#39;</span>;
<a name="l01017"></a>01017     $this-&gt;assertRegExp($regex, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;#me&#39;</span>)-&gt;innerXHTML(), <span class="stringliteral">&#39;BR should have a closing tag.&#39;</span>);
<a name="l01018"></a>01018   }
<a name="l01019"></a>01019   
<a name="l01020"></a><a class="code" href="class_query_path_test.html#aed23e1b139e13ad5fc99ab65c710bc20">01020</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#aed23e1b139e13ad5fc99ab65c710bc20">testXML</a>() {
<a name="l01021"></a>01021     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01022"></a>01022     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>);
<a name="l01023"></a>01023     $xml = <span class="stringliteral">&#39;&lt;b&gt;test&lt;/b&gt;&#39;</span>;
<a name="l01024"></a>01024     $this-&gt;assertEquals($xml, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;xml($xml)-&gt;find(<span class="charliteral">&#39;b&#39;</span>)-&gt;xml());
<a name="l01025"></a>01025     
<a name="l01026"></a>01026     $xml = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;foo&lt;/title&gt;&lt;/head&gt;&lt;body&gt;bar&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01027"></a>01027     <span class="comment">// We expect an XML declaration to be prepended:</span>
<a name="l01028"></a>01028     $this-&gt;assertEquals(<span class="stringliteral">&#39;&lt;?xml&#39;</span>, substr(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;html&#39;</span>)-&gt;xml(), 0, 5));
<a name="l01029"></a>01029     
<a name="l01030"></a>01030     <span class="comment">// We don&#39;t want an XM/L declaration if xml(TRUE).</span>
<a name="l01031"></a>01031     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;foo/&gt;&#39;</span>;
<a name="l01032"></a>01032     $this-&gt;assertFalse(strpos(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml)-&gt;xml(TRUE), <span class="stringliteral">&#39;&lt;?xml&#39;</span>));
<a name="l01033"></a>01033     
<a name="l01034"></a>01034     <span class="comment">// We expect NULL if the document is empty.</span>
<a name="l01035"></a>01035     $this-&gt;assertNull(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>()-&gt;xml());
<a name="l01036"></a>01036     
<a name="l01037"></a>01037     <span class="comment">// Non-DOMNodes should not be rendered:</span>
<a name="l01038"></a>01038     $fn = <span class="stringliteral">&#39;mapCallbackFunction&#39;</span>;
<a name="l01039"></a>01039     $this-&gt;assertNull(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;map(array($this, $fn))-&gt;xml());
<a name="l01040"></a>01040   }
<a name="l01041"></a>01041   
<a name="l01042"></a><a class="code" href="class_query_path_test.html#a0223e67a03152a7f960443c6049c6249">01042</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a0223e67a03152a7f960443c6049c6249">testXHTML</a>() {
<a name="l01043"></a>01043     <span class="comment">// throw new Exception();</span>
<a name="l01044"></a>01044     
<a name="l01045"></a>01045     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01046"></a>01046     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>);
<a name="l01047"></a>01047     $xml = <span class="stringliteral">&#39;&lt;b&gt;test&lt;/b&gt;&#39;</span>;
<a name="l01048"></a>01048     $this-&gt;assertEquals($xml, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;xml($xml)-&gt;find(<span class="charliteral">&#39;b&#39;</span>)-&gt;xhtml());
<a name="l01049"></a>01049     
<a name="l01050"></a>01050     $xml = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;foo&lt;/title&gt;&lt;/head&gt;&lt;body&gt;bar&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01051"></a>01051     <span class="comment">// We expect an XML declaration to be prepended:</span>
<a name="l01052"></a>01052     $this-&gt;assertEquals(<span class="stringliteral">&#39;&lt;?xml&#39;</span>, substr(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;html&#39;</span>)-&gt;xhtml(), 0, 5));
<a name="l01053"></a>01053     
<a name="l01054"></a>01054     <span class="comment">// We don&#39;t want an XM/L declaration if xml(TRUE).</span>
<a name="l01055"></a>01055     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;foo/&gt;&#39;</span>;
<a name="l01056"></a>01056     $this-&gt;assertFalse(strpos(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml)-&gt;xhtml(TRUE), <span class="stringliteral">&#39;&lt;?xml&#39;</span>));
<a name="l01057"></a>01057     
<a name="l01058"></a>01058     <span class="comment">// We expect NULL if the document is empty.</span>
<a name="l01059"></a>01059     $this-&gt;assertNull(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>()-&gt;xhtml());
<a name="l01060"></a>01060     
<a name="l01061"></a>01061     <span class="comment">// Non-DOMNodes should not be rendered:</span>
<a name="l01062"></a>01062     $fn = <span class="stringliteral">&#39;mapCallbackFunction&#39;</span>;
<a name="l01063"></a>01063     $this-&gt;assertNull(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;map(array($this, $fn))-&gt;xhtml());
<a name="l01064"></a>01064     
<a name="l01065"></a>01065     <span class="comment">// Regression for issue #10: Tags should not be unary (e.g. we want &lt;script&gt;&lt;/script&gt;, not &lt;script/&gt;)</span>
<a name="l01066"></a>01066     $xml = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;foo&lt;/title&gt;&lt;/head&gt;</span>
<a name="l01067"></a>01067 <span class="stringliteral">      &lt;body&gt;</span>
<a name="l01068"></a>01068 <span class="stringliteral">      bar&lt;br/&gt;&lt;hr width=&quot;100&quot;&gt;</span>
<a name="l01069"></a>01069 <span class="stringliteral">      &lt;script&gt;&lt;/script&gt;</span>
<a name="l01070"></a>01070 <span class="stringliteral">      &lt;script&gt;</span>
<a name="l01071"></a>01071 <span class="stringliteral">      alert(&quot;Foo&quot;);</span>
<a name="l01072"></a>01072 <span class="stringliteral">      &lt;/script&gt;</span>
<a name="l01073"></a>01073 <span class="stringliteral">      &lt;frameset id=&quot;fooframeset&quot;&gt;&lt;/frameset&gt;</span>
<a name="l01074"></a>01074 <span class="stringliteral">      &lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01075"></a>01075     
<a name="l01076"></a>01076     $xhtml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml)-&gt;xhtml();
<a name="l01077"></a>01077     
<a name="l01078"></a>01078     <span class="comment">//throw new Exception($xhtml);</span>
<a name="l01079"></a>01079     
<a name="l01080"></a>01080     <span class="comment">// Look for a properly formatted BR unary tag:</span>
<a name="l01081"></a>01081     $regex = <span class="stringliteral">&#39;/&lt;br \/&gt;/&#39;</span>;
<a name="l01082"></a>01082     $this-&gt;assertRegExp($regex, $xhtml, <span class="stringliteral">&#39;BR should have a closing tag.&#39;</span>);
<a name="l01083"></a>01083     
<a name="l01084"></a>01084     <span class="comment">// Look for a properly formatted HR tag:</span>
<a name="l01085"></a>01085     $regex = <span class="stringliteral">&#39;/&lt;hr width=&quot;100&quot; \/&gt;/&#39;</span>;
<a name="l01086"></a>01086     $this-&gt;assertRegExp($regex, $xhtml, <span class="stringliteral">&#39;BR should have a closing tag.&#39;</span>);
<a name="l01087"></a>01087     
<a name="l01088"></a>01088     <span class="comment">// Ensure that script tag is not collapsed:</span>
<a name="l01089"></a>01089     $regex = <span class="stringliteral">&#39;/&lt;script&gt;&lt;\/script&gt;/&#39;</span>;
<a name="l01090"></a>01090     $this-&gt;assertRegExp($regex, $xhtml, <span class="stringliteral">&#39;BR should have a closing tag.&#39;</span>);
<a name="l01091"></a>01091     
<a name="l01092"></a>01092     <span class="comment">// Ensure that frameset tag is not collapsed (it looks like &lt;frame&gt;):</span>
<a name="l01093"></a>01093     $regex = <span class="stringliteral">&#39;/&lt;frameset id=&quot;fooframeset&quot;&gt;&lt;\/frameset&gt;/&#39;</span>;
<a name="l01094"></a>01094     $this-&gt;assertRegExp($regex, $xhtml, <span class="stringliteral">&#39;BR should have a closing tag.&#39;</span>);
<a name="l01095"></a>01095     
<a name="l01096"></a>01096     <span class="comment">// Ensure that script gets wrapped in CDATA:</span>
<a name="l01097"></a>01097     $find = <span class="stringliteral">&#39;/* &lt;![CDATA[ &#39;</span>;
<a name="l01098"></a>01098     $this-&gt;assertTrue(strpos($xhtml, $find) &gt; 0, <span class="stringliteral">&#39;CDATA section should be escaped.&#39;</span>);
<a name="l01099"></a>01099     
<a name="l01100"></a>01100     <span class="comment">// Regression: Make sure it parses.</span>
<a name="l01101"></a>01101     $xhtml = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;br /&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>)-&gt;xhtml();
<a name="l01102"></a>01102     
<a name="l01103"></a>01103     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xhtml);
<a name="l01104"></a>01104     
<a name="l01105"></a>01105   }
<a name="l01106"></a>01106   
<a name="l01107"></a><a class="code" href="class_query_path_test.html#a1ba6acf4648697cf618a16cbbc5a6ce3">01107</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a1ba6acf4648697cf618a16cbbc5a6ce3">testWriteXML</a>() {
<a name="l01108"></a>01108     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;foo&lt;/title&gt;&lt;/head&gt;&lt;body&gt;bar&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01109"></a>01109     
<a name="l01110"></a>01110     <span class="keywordflow">if</span> (!ob_start()) die (<span class="stringliteral">&quot;Could not start OB.&quot;</span>);
<a name="l01111"></a>01111     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;tml&#39;</span>)-&gt;writeXML();
<a name="l01112"></a>01112     <a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a> = ob_get_contents();
<a name="l01113"></a>01113     ob_end_clean();
<a name="l01114"></a>01114     
<a name="l01115"></a>01115     <span class="comment">// We expect an XML declaration at the top.</span>
<a name="l01116"></a>01116     $this-&gt;assertEquals(<span class="stringliteral">&#39;&lt;?xml&#39;</span>, substr(<a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a>, 0, 5));
<a name="l01117"></a>01117     
<a name="l01118"></a>01118     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;html&gt;&lt;head&gt;&lt;script&gt;</span>
<a name="l01119"></a>01119 <span class="stringliteral">    &lt;!-- </span>
<a name="l01120"></a>01120 <span class="stringliteral">    1 &lt; 2;</span>
<a name="l01121"></a>01121 <span class="stringliteral">    --&gt;</span>
<a name="l01122"></a>01122 <span class="stringliteral">    &lt;/script&gt;</span>
<a name="l01123"></a>01123 <span class="stringliteral">    &lt;![CDATA[This is CDATA]]&gt;</span>
<a name="l01124"></a>01124 <span class="stringliteral">    &lt;title&gt;foo&lt;/title&gt;&lt;/head&gt;&lt;body&gt;bar&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01125"></a>01125     
<a name="l01126"></a>01126     <span class="keywordflow">if</span> (!ob_start()) die (<span class="stringliteral">&quot;Could not start OB.&quot;</span>);
<a name="l01127"></a>01127     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;tml&#39;</span>)-&gt;writeXML();
<a name="l01128"></a>01128     <a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a> = ob_get_contents();
<a name="l01129"></a>01129     ob_end_clean();
<a name="l01130"></a>01130     
<a name="l01131"></a>01131     <span class="comment">// We expect an XML declaration at the top.</span>
<a name="l01132"></a>01132     $this-&gt;assertEquals(<span class="stringliteral">&#39;&lt;?xml&#39;</span>, substr(<a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a>, 0, 5));
<a name="l01133"></a>01133     
<a name="l01134"></a>01134     <span class="comment">// Test writing to a file:</span>
<a name="l01135"></a>01135     $name = <span class="stringliteral">&#39;./&#39;</span> . __FUNCTION__ . <span class="stringliteral">&#39;.xml&#39;</span>;
<a name="l01136"></a>01136     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml)-&gt;writeXML($name);
<a name="l01137"></a>01137     $this-&gt;assertTrue(file_exists($name));
<a name="l01138"></a>01138     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($name) instanceof <a class="code" href="class_query_path.html" title="The Query Path object is the primary tool in this library.">QueryPath</a>);
<a name="l01139"></a>01139     unlink($name);
<a name="l01140"></a>01140   }
<a name="l01141"></a>01141   
<a name="l01142"></a><a class="code" href="class_query_path_test.html#a9f2e029829a407c09535acf1ba82efec">01142</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a9f2e029829a407c09535acf1ba82efec">testWriteXHTML</a>() {
<a name="l01143"></a>01143     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;foo&lt;/title&gt;&lt;/head&gt;&lt;body&gt;bar&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01144"></a>01144     
<a name="l01145"></a>01145     <span class="keywordflow">if</span> (!ob_start()) die (<span class="stringliteral">&quot;Could not start OB.&quot;</span>);
<a name="l01146"></a>01146     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;tml&#39;</span>)-&gt;writeXHTML();
<a name="l01147"></a>01147     <a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a> = ob_get_contents();
<a name="l01148"></a>01148     ob_end_clean();
<a name="l01149"></a>01149     
<a name="l01150"></a>01150     <span class="comment">// We expect an XML declaration at the top.</span>
<a name="l01151"></a>01151     $this-&gt;assertEquals(<span class="stringliteral">&#39;&lt;?xml&#39;</span>, substr(<a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a>, 0, 5));
<a name="l01152"></a>01152     
<a name="l01153"></a>01153     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;html&gt;&lt;head&gt;&lt;script&gt;</span>
<a name="l01154"></a>01154 <span class="stringliteral">    &lt;!-- </span>
<a name="l01155"></a>01155 <span class="stringliteral">    1 &lt; 2;</span>
<a name="l01156"></a>01156 <span class="stringliteral">    --&gt;</span>
<a name="l01157"></a>01157 <span class="stringliteral">    &lt;/script&gt;</span>
<a name="l01158"></a>01158 <span class="stringliteral">    &lt;![CDATA[This is CDATA]]&gt;</span>
<a name="l01159"></a>01159 <span class="stringliteral">    &lt;title&gt;foo&lt;/title&gt;&lt;/head&gt;&lt;body&gt;bar&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01160"></a>01160     
<a name="l01161"></a>01161     <span class="keywordflow">if</span> (!ob_start()) die (<span class="stringliteral">&quot;Could not start OB.&quot;</span>);
<a name="l01162"></a>01162     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;html&#39;</span>)-&gt;writeXHTML();
<a name="l01163"></a>01163     <a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a> = ob_get_contents();
<a name="l01164"></a>01164     ob_end_clean();
<a name="l01165"></a>01165     
<a name="l01166"></a>01166     <span class="comment">// We expect an XML declaration at the top.</span>
<a name="l01167"></a>01167     $this-&gt;assertEquals(<span class="stringliteral">&#39;&lt;?xml&#39;</span>, substr(<a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a>, 0, 5));
<a name="l01168"></a>01168     
<a name="l01169"></a>01169     <span class="comment">// Test writing to a file:</span>
<a name="l01170"></a>01170     $name = <span class="stringliteral">&#39;./&#39;</span> . __FUNCTION__ . <span class="stringliteral">&#39;.xml&#39;</span>;
<a name="l01171"></a>01171     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml)-&gt;writeXHTML($name);
<a name="l01172"></a>01172     $this-&gt;assertTrue(file_exists($name));
<a name="l01173"></a>01173     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($name) instanceof <a class="code" href="class_query_path.html" title="The Query Path object is the primary tool in this library.">QueryPath</a>);
<a name="l01174"></a>01174     unlink($name);
<a name="l01175"></a>01175     
<a name="l01176"></a>01176     <span class="comment">// Regression for issue #10 (keep closing tags in XHTML)</span>
<a name="l01177"></a>01177     $xhtml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;foo&lt;/title&gt;&lt;script&gt;&lt;/script&gt;&lt;br/&gt;&lt;/head&gt;&lt;body&gt;bar&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01178"></a>01178     <span class="keywordflow">if</span> (!ob_start()) die (<span class="stringliteral">&quot;Could not start OB.&quot;</span>);
<a name="l01179"></a>01179     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xhtml, <span class="stringliteral">&#39;html&#39;</span>)-&gt;writeXHTML();
<a name="l01180"></a>01180     <a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a> = ob_get_contents();
<a name="l01181"></a>01181     ob_end_clean();
<a name="l01182"></a>01182     
<a name="l01183"></a>01183     $pattern = <span class="stringliteral">&#39;/&lt;\/script&gt;/&#39;</span>;
<a name="l01184"></a>01184     $this-&gt;assertRegExp($pattern, <a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a>, <span class="stringliteral">&#39;Should be closing script tag.&#39;</span>);
<a name="l01185"></a>01185     
<a name="l01186"></a>01186     $pattern = <span class="stringliteral">&#39;/&lt;\/br&gt;/&#39;</span>;
<a name="l01187"></a>01187     $this-&gt;assertRegExp($pattern, <a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a>, <span class="stringliteral">&#39;Should be closing br tag.&#39;</span>);
<a name="l01188"></a>01188   }
<a name="l01189"></a>01189   <span class="comment"></span>
<a name="l01190"></a>01190 <span class="comment">  /**</span>
<a name="l01191"></a>01191 <span class="comment">   * @expectedException QueryPathIOException</span>
<a name="l01192"></a>01192 <span class="comment">   */</span>
<a name="l01193"></a><a class="code" href="class_query_path_test.html#ad7dd553d622fd5bbed47d89612d000c9">01193</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ad7dd553d622fd5bbed47d89612d000c9" title="QueryPathIOException">testFailWriteXML</a>() {
<a name="l01194"></a>01194     <span class="keywordflow">try</span> {
<a name="l01195"></a>01195       <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>()-&gt;writeXML(<span class="stringliteral">&#39;./test/no-writing.xml&#39;</span>);
<a name="l01196"></a>01196     }
<a name="l01197"></a>01197     <span class="keywordflow">catch</span> (Exception $e) {
<a name="l01198"></a>01198       <span class="comment">//print $e-&gt;getMessage();</span>
<a name="l01199"></a>01199       <span class="keywordflow">throw</span> $e;
<a name="l01200"></a>01200     }
<a name="l01201"></a>01201     
<a name="l01202"></a>01202   }
<a name="l01203"></a>01203   <span class="comment"></span>
<a name="l01204"></a>01204 <span class="comment">  /**</span>
<a name="l01205"></a>01205 <span class="comment">   * @expectedException QueryPathIOException</span>
<a name="l01206"></a>01206 <span class="comment">   */</span>
<a name="l01207"></a><a class="code" href="class_query_path_test.html#a75a684dc458e5e156a6fbc4137d0e1da">01207</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a75a684dc458e5e156a6fbc4137d0e1da" title="QueryPathIOException">testFailWriteXHTML</a>() {
<a name="l01208"></a>01208     <span class="keywordflow">try</span> {
<a name="l01209"></a>01209       <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>()-&gt;writeXHTML(<span class="stringliteral">&#39;./test/no-writing.xml&#39;</span>);
<a name="l01210"></a>01210     }
<a name="l01211"></a>01211     <span class="keywordflow">catch</span> (<a class="code" href="class_query_path_i_o_exception.html" title="Indicates that an input/output exception has occurred.">QueryPathIOException</a> $e) {
<a name="l01212"></a>01212       <span class="comment">//print $e-&gt;getMessage();</span>
<a name="l01213"></a>01213       <span class="keywordflow">throw</span> $e;
<a name="l01214"></a>01214     }
<a name="l01215"></a>01215     
<a name="l01216"></a>01216   }
<a name="l01217"></a>01217   <span class="comment"></span>
<a name="l01218"></a>01218 <span class="comment">  /**</span>
<a name="l01219"></a>01219 <span class="comment">   * @expectedException QueryPathIOException</span>
<a name="l01220"></a>01220 <span class="comment">   */</span>
<a name="l01221"></a><a class="code" href="class_query_path_test.html#abc73786de21167a411df6b480bf88022">01221</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#abc73786de21167a411df6b480bf88022" title="QueryPathIOException">testFailWriteHTML</a>() {
<a name="l01222"></a>01222     <span class="keywordflow">try</span> {
<a name="l01223"></a>01223       <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;foo/&gt;&#39;</span>)-&gt;writeXML(<span class="stringliteral">&#39;./test/no-writing.xml&#39;</span>);
<a name="l01224"></a>01224     }
<a name="l01225"></a>01225     <span class="keywordflow">catch</span> (<a class="code" href="class_query_path_i_o_exception.html" title="Indicates that an input/output exception has occurred.">QueryPathIOException</a> $e) {
<a name="l01226"></a>01226       <span class="comment">// print $e-&gt;getMessage();</span>
<a name="l01227"></a>01227       <span class="keywordflow">throw</span> $e;
<a name="l01228"></a>01228     }
<a name="l01229"></a>01229     
<a name="l01230"></a>01230   }
<a name="l01231"></a>01231   
<a name="l01232"></a><a class="code" href="class_query_path_test.html#ac11e013bd5061f00f78a347a20afe872">01232</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ac11e013bd5061f00f78a347a20afe872">testWriteHTML</a>() {
<a name="l01233"></a>01233     $xml = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;foo&lt;/title&gt;&lt;/head&gt;&lt;body&gt;bar&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01234"></a>01234     
<a name="l01235"></a>01235     <span class="keywordflow">if</span> (!ob_start()) die (<span class="stringliteral">&quot;Could not start OB.&quot;</span>);
<a name="l01236"></a>01236     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;tml&#39;</span>)-&gt;writeHTML();
<a name="l01237"></a>01237     <a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a> = ob_get_contents();
<a name="l01238"></a>01238     ob_end_clean();
<a name="l01239"></a>01239     
<a name="l01240"></a>01240     <span class="comment">// We expect a doctype declaration at the top.</span>
<a name="l01241"></a>01241     $this-&gt;assertEquals(<span class="stringliteral">&#39;&lt;!DOC&#39;</span>, substr(<a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a>, 0, 5));
<a name="l01242"></a>01242     
<a name="l01243"></a>01243     $xml = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;foo&lt;/title&gt;</span>
<a name="l01244"></a>01244 <span class="stringliteral">    &lt;script&gt;&lt;!--</span>
<a name="l01245"></a>01245 <span class="stringliteral">    var foo = 1 &lt; 5;</span>
<a name="l01246"></a>01246 <span class="stringliteral">    --&gt;&lt;/script&gt;</span>
<a name="l01247"></a>01247 <span class="stringliteral">    &lt;/head&gt;&lt;body&gt;bar&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01248"></a>01248     
<a name="l01249"></a>01249     <span class="keywordflow">if</span> (!ob_start()) die (<span class="stringliteral">&quot;Could not start OB.&quot;</span>);
<a name="l01250"></a>01250     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;tml&#39;</span>)-&gt;writeHTML();
<a name="l01251"></a>01251     <a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a> = ob_get_contents();
<a name="l01252"></a>01252     ob_end_clean();
<a name="l01253"></a>01253     
<a name="l01254"></a>01254     <span class="comment">// We expect a doctype declaration at the top.</span>
<a name="l01255"></a>01255     $this-&gt;assertEquals(<span class="stringliteral">&#39;&lt;!DOC&#39;</span>, substr(<a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a>, 0, 5));
<a name="l01256"></a>01256     
<a name="l01257"></a>01257     $xml = <span class="stringliteral">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;foo&lt;/title&gt;</span>
<a name="l01258"></a>01258 <span class="stringliteral">    &lt;script&gt;&lt;![CDATA[</span>
<a name="l01259"></a>01259 <span class="stringliteral">    var foo = 1 &lt; 5;</span>
<a name="l01260"></a>01260 <span class="stringliteral">    ]]&gt;&lt;/script&gt;</span>
<a name="l01261"></a>01261 <span class="stringliteral">    &lt;/head&gt;&lt;body&gt;bar&lt;/body&gt;&lt;/html&gt;&#39;</span>;
<a name="l01262"></a>01262     
<a name="l01263"></a>01263     <span class="keywordflow">if</span> (!ob_start()) die (<span class="stringliteral">&quot;Could not start OB.&quot;</span>);
<a name="l01264"></a>01264     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;tml&#39;</span>)-&gt;writeHTML();
<a name="l01265"></a>01265     <a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a> = ob_get_contents();
<a name="l01266"></a>01266     ob_end_clean();
<a name="l01267"></a>01267     
<a name="l01268"></a>01268     <span class="comment">// We expect a doctype declaration at the top.</span>
<a name="l01269"></a>01269     $this-&gt;assertEquals(<span class="stringliteral">&#39;&lt;!DOC&#39;</span>, substr(<a class="code" href="fetch__rss_8php.html#a48cb304902320d173a4eaa41543327b9">$out</a>, 0, 5));
<a name="l01270"></a>01270     
<a name="l01271"></a>01271     <span class="comment">// Test writing to a file:</span>
<a name="l01272"></a>01272     $name = <span class="stringliteral">&#39;./&#39;</span> . __FUNCTION__ . <span class="stringliteral">&#39;.html&#39;</span>;
<a name="l01273"></a>01273     <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml)-&gt;writeXML($name);
<a name="l01274"></a>01274     $this-&gt;assertTrue(file_exists($name));
<a name="l01275"></a>01275     $this-&gt;assertTrue(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($name) instanceof <a class="code" href="class_query_path.html" title="The Query Path object is the primary tool in this library.">QueryPath</a>);
<a name="l01276"></a>01276     unlink($name);
<a name="l01277"></a>01277   }
<a name="l01278"></a>01278   
<a name="l01279"></a><a class="code" href="class_query_path_test.html#a9ab8386f4aef604eb127edb875003c03">01279</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a9ab8386f4aef604eb127edb875003c03">testText</a>() {
<a name="l01280"></a>01280     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div&gt;Text A&lt;/div&gt;&lt;div&gt;Text B&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l01281"></a>01281     $this-&gt;assertEquals(<span class="stringliteral">&#39;Text AText B&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml)-&gt;text());
<a name="l01282"></a>01282     $this-&gt;assertEquals(<span class="stringliteral">&#39;Foo&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;eq(0)-&gt;text(<span class="stringliteral">&#39;Foo&#39;</span>)-&gt;text());
<a name="l01283"></a>01283   }
<a name="l01284"></a>01284   
<a name="l01285"></a><a class="code" href="class_query_path_test.html#a4b3cd62b4eced1ac42010af3f612fa6a">01285</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a4b3cd62b4eced1ac42010af3f612fa6a">testTextAfter</a>() {
<a name="l01286"></a>01286     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;br/&gt;After&lt;foo/&gt;&lt;br/&gt;After2&lt;div/&gt;After3&lt;/root&gt;&#39;</span>;
<a name="l01287"></a>01287     $this-&gt;assertEquals(<span class="stringliteral">&#39;AfterAfter2&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;br&#39;</span>)-&gt;textAfter());
<a name="l01288"></a>01288     $this-&gt;assertEquals(<span class="stringliteral">&#39;Blarg&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;foo&#39;</span>)-&gt;textAfter(<span class="stringliteral">&#39;Blarg&#39;</span>)-&gt;top(<span class="stringliteral">&#39;foo&#39;</span>)-&gt;textAfter());
<a name="l01289"></a>01289   }
<a name="l01290"></a>01290   
<a name="l01291"></a><a class="code" href="class_query_path_test.html#a04823a1db58dcfe1d69d67712645d8c4">01291</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a04823a1db58dcfe1d69d67712645d8c4">testTextBefore</a>() {
<a name="l01292"></a>01292     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;Before&lt;br/&gt;&lt;foo/&gt;Before2&lt;br/&gt;Before3&lt;div/&gt;&lt;/root&gt;&#39;</span>;
<a name="l01293"></a>01293     $this-&gt;assertEquals(<span class="stringliteral">&#39;BeforeBefore2&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;br&#39;</span>)-&gt;textBefore());
<a name="l01294"></a>01294     $this-&gt;assertEquals(<span class="stringliteral">&#39;Blarg&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;foo&#39;</span>)-&gt;textBefore(<span class="stringliteral">&#39;Blarg&#39;</span>)-&gt;top(<span class="stringliteral">&#39;foo&#39;</span>)-&gt;textBefore());
<a name="l01295"></a>01295 
<a name="l01296"></a>01296   }
<a name="l01297"></a>01297   
<a name="l01298"></a><a class="code" href="class_query_path_test.html#a31c8dd3533ce373667b614edf659ec41">01298</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a31c8dd3533ce373667b614edf659ec41">testTextImplode</a>() {
<a name="l01299"></a>01299     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div&gt;Text A&lt;/div&gt;&lt;div&gt;Text B&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l01300"></a>01300     $this-&gt;assertEquals(<span class="stringliteral">&#39;Text A, Text B&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;textImplode());
<a name="l01301"></a>01301     $this-&gt;assertEquals(<span class="stringliteral">&#39;Text A--Text B&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;textImplode(<span class="stringliteral">&#39;--&#39;</span>));
<a name="l01302"></a>01302     
<a name="l01303"></a>01303     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div&gt;Text A &lt;/div&gt;&lt;div&gt;Text B&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l01304"></a>01304     $this-&gt;assertEquals(<span class="stringliteral">&#39;Text A , Text B&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;textImplode());
<a name="l01305"></a>01305     
<a name="l01306"></a>01306     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div&gt;Text A &lt;/div&gt;</span>
<a name="l01307"></a>01307 <span class="stringliteral">    &lt;div&gt;</span>
<a name="l01308"></a>01308 <span class="stringliteral">    &lt;/div&gt;&lt;div&gt;Text B&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l01309"></a>01309     $this-&gt;assertEquals(<span class="stringliteral">&#39;Text A , Text B&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;textImplode(<span class="stringliteral">&#39;, &#39;</span>, TRUE));
<a name="l01310"></a>01310     
<a name="l01311"></a>01311     <span class="comment">// Test with empties</span>
<a name="l01312"></a>01312     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;div&gt;Text A&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;Text B&lt;/div&gt;&lt;/root&gt;&#39;</span>;
<a name="l01313"></a>01313     $this-&gt;assertEquals(<span class="stringliteral">&#39;Text A- -Text B&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;textImplode(<span class="charliteral">&#39;-&#39;</span>, FALSE));
<a name="l01314"></a>01314   }
<a name="l01315"></a>01315   
<a name="l01316"></a><a class="code" href="class_query_path_test.html#ad124addfcb5ef4e52f51a45fa88c898e">01316</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ad124addfcb5ef4e52f51a45fa88c898e">testChildrenText</a>() {
<a name="l01317"></a>01317     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;wrapper&gt;</span>
<a name="l01318"></a>01318 <span class="stringliteral">    NOT ME!</span>
<a name="l01319"></a>01319 <span class="stringliteral">    &lt;div&gt;Text A &lt;/div&gt;</span>
<a name="l01320"></a>01320 <span class="stringliteral">    &lt;div&gt;</span>
<a name="l01321"></a>01321 <span class="stringliteral">    &lt;/div&gt;&lt;div&gt;Text B&lt;/div&gt;&lt;/wrapper&gt;&lt;/root&gt;&#39;</span>;
<a name="l01322"></a>01322     $this-&gt;assertEquals(<span class="stringliteral">&#39;Text A , Text B&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;div&#39;</span>)-&gt;childrenText(<span class="stringliteral">&#39;, &#39;</span>, TRUE), <span class="stringliteral">&#39;Just inner text.&#39;</span>);
<a name="l01323"></a>01323   }
<a name="l01324"></a>01324   
<a name="l01325"></a><a class="code" href="class_query_path_test.html#ad044680f6bb82f50a6ea0f42c8de6b79">01325</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ad044680f6bb82f50a6ea0f42c8de6b79">testNext</a>() {
<a name="l01326"></a>01326     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01327"></a>01327     $this-&gt;assertEquals(<span class="stringliteral">&#39;inner&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;next()-&gt;tag());
<a name="l01328"></a>01328     $this-&gt;assertEquals(<span class="stringliteral">&#39;foot&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;next()-&gt;eq(1)-&gt;tag());
<a name="l01329"></a>01329     
<a name="l01330"></a>01330     $this-&gt;assertEquals(<span class="stringliteral">&#39;foot&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;next(<span class="stringliteral">&#39;foot&#39;</span>)-&gt;tag());
<a name="l01331"></a>01331     
<a name="l01332"></a>01332     <span class="comment">// Regression test for issue eabrand identified:</span>
<a name="l01333"></a>01333     
<a name="l01334"></a>01334     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="class_query_path.html#a5728576905f79bc6dfdfad6aad326aed" title="This is a stub HTML 4.01 document.">QueryPath::HTML_STUB</a>)-&gt;append(<span class="stringliteral">&#39;&lt;div&gt;&lt;/div&gt;&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;Goodbye&lt;/p&gt;&#39;</span>)
<a name="l01335"></a>01335       -&gt;children(<span class="charliteral">&#39;p&#39;</span>)
<a name="l01336"></a>01336       -&gt;after(<span class="stringliteral">&#39;&lt;p&gt;new paragraph&lt;/p&gt;&#39;</span>);
<a name="l01337"></a>01337       
<a name="l01338"></a>01338     $testarray = array(<span class="stringliteral">&#39;new paragraph&#39;</span>, <span class="stringliteral">&#39;Goodbye&#39;</span>, <span class="stringliteral">&#39;new paragraph&#39;</span>);   
<a name="l01339"></a>01339       
<a name="l01340"></a>01340     <span class="comment">//throw new Exception($qp-&gt;top()-&gt;xml());</span>
<a name="l01341"></a>01341       
<a name="l01342"></a>01342     $this-&gt;assertEquals(<span class="stringliteral">&#39;Hello&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top(<span class="stringliteral">&#39;p:first&#39;</span>)-&gt;text(), <span class="stringliteral">&quot;Test First P&quot;</span>);
<a name="l01343"></a>01343     <a class="code" href="odt_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> = 0;
<a name="l01344"></a>01344     <span class="keywordflow">while</span>(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;next(<span class="charliteral">&#39;p&#39;</span>)-&gt;html() != null) {
<a name="l01345"></a>01345       $this-&gt;assertEquals($testarray[$i], <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;text(), $i.<span class="stringliteral">&quot; didn&#39;t match&quot;</span>);
<a name="l01346"></a>01346       $i++;
<a name="l01347"></a>01347     }
<a name="l01348"></a>01348     $this-&gt;assertEquals(3, $i);
<a name="l01349"></a>01349 <span class="comment">//    $this-&gt;assertEquals(&#39;new paragraph&#39;, $qp-&gt;next()-&gt;text(), &quot;Test Newly Added P&quot;);</span>
<a name="l01350"></a>01350 <span class="comment">//    $this-&gt;assertEquals(&#39;Goodbye&#39;, $qp-&gt;next()-&gt;text(), &quot;Test third P&quot;);</span>
<a name="l01351"></a>01351 <span class="comment">//    $this-&gt;assertEquals(&#39;new paragraph&#39;, $qp-&gt;next()-&gt;text(), &quot;Test Other Newly Added P&quot;);</span>
<a name="l01352"></a>01352   }
<a name="l01353"></a><a class="code" href="class_query_path_test.html#af67785645d679a7dc2cb07c95084831b">01353</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#af67785645d679a7dc2cb07c95084831b">testPrev</a>() {
<a name="l01354"></a>01354     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01355"></a>01355     $this-&gt;assertEquals(<span class="stringliteral">&#39;head&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;prev()-&gt;tag());
<a name="l01356"></a>01356     $this-&gt;assertEquals(<span class="stringliteral">&#39;inner&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;prev()-&gt;eq(1)-&gt;tag());
<a name="l01357"></a>01357     $this-&gt;assertEquals(<span class="stringliteral">&#39;head&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;foot&#39;</span>)-&gt;prev(<span class="stringliteral">&#39;head&#39;</span>)-&gt;tag());
<a name="l01358"></a>01358   }
<a name="l01359"></a><a class="code" href="class_query_path_test.html#aba4f823810f51612ba90e343d5c07920">01359</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#aba4f823810f51612ba90e343d5c07920">testNextAll</a>() {
<a name="l01360"></a>01360     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01361"></a>01361     $this-&gt;assertEquals(3, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#one&#39;</span>)-&gt;nextAll()-&gt;size());
<a name="l01362"></a>01362     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;nextAll(<span class="stringliteral">&#39;inner&#39;</span>)-&gt;size());
<a name="l01363"></a>01363   }
<a name="l01364"></a><a class="code" href="class_query_path_test.html#a13a61dd1b4ab492c6d688c022b57acc0">01364</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a13a61dd1b4ab492c6d688c022b57acc0">testPrevAll</a>() {
<a name="l01365"></a>01365     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01366"></a>01366     $this-&gt;assertEquals(3, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#four&#39;</span>)-&gt;prevAll()-&gt;size());
<a name="l01367"></a>01367     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;foot&#39;</span>)-&gt;prevAll(<span class="stringliteral">&#39;inner&#39;</span>)-&gt;size());
<a name="l01368"></a>01368   }
<a name="l01369"></a><a class="code" href="class_query_path_test.html#ae767518e01bc984649821b152d08b209">01369</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ae767518e01bc984649821b152d08b209">testPeers</a>() {
<a name="l01370"></a>01370     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01371"></a>01371     $this-&gt;assertEquals(3, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#two&#39;</span>)-&gt;peers()-&gt;size());
<a name="l01372"></a>01372     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;foot&#39;</span>)-&gt;peers(<span class="stringliteral">&#39;inner&#39;</span>)-&gt;size());
<a name="l01373"></a>01373   }
<a name="l01374"></a><a class="code" href="class_query_path_test.html#ad9088b08fcb113154eec58ad0efaa24b">01374</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ad9088b08fcb113154eec58ad0efaa24b">testParent</a>() {
<a name="l01375"></a>01375     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01376"></a>01376     $this-&gt;assertEquals(<span class="stringliteral">&#39;root&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>)-&gt;parent()-&gt;tag());
<a name="l01377"></a>01377     $this-&gt;assertEquals(<span class="stringliteral">&#39;root&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;parent(<span class="stringliteral">&#39;root&#39;</span>)-&gt;tag());
<a name="l01378"></a>01378     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;parent()-&gt;size());
<a name="l01379"></a>01379   }
<a name="l01380"></a><a class="code" href="class_query_path_test.html#a231f0811854084eaabd64d6f591b3d07">01380</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a231f0811854084eaabd64d6f591b3d07">testClosest</a>() {
<a name="l01381"></a>01381     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01382"></a>01382     $this-&gt;assertEquals(<span class="stringliteral">&#39;root&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;parent(<span class="stringliteral">&#39;root&#39;</span>)-&gt;tag());
<a name="l01383"></a>01383     
<a name="l01384"></a>01384     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a name="l01385"></a>01385 <span class="stringliteral">    &lt;root&gt;</span>
<a name="l01386"></a>01386 <span class="stringliteral">      &lt;a class=&quot;foo&quot;&gt;</span>
<a name="l01387"></a>01387 <span class="stringliteral">        &lt;b/&gt;</span>
<a name="l01388"></a>01388 <span class="stringliteral">      &lt;/a&gt;</span>
<a name="l01389"></a>01389 <span class="stringliteral">      &lt;b class=&quot;foo&quot;/&gt;</span>
<a name="l01390"></a>01390 <span class="stringliteral">    &lt;/root&gt;&#39;</span>;
<a name="l01391"></a>01391     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="charliteral">&#39;b&#39;</span>)-&gt;closest(<span class="stringliteral">&#39;.foo&#39;</span>)-&gt;size());
<a name="l01392"></a>01392   }
<a name="l01393"></a>01393   
<a name="l01394"></a><a class="code" href="class_query_path_test.html#a1fe4c86ecd98657f8493623e9e0b2178">01394</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a1fe4c86ecd98657f8493623e9e0b2178">testParents</a>() {
<a name="l01395"></a>01395     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01396"></a>01396     
<a name="l01397"></a>01397     <span class="comment">// Three: two inners and a root.</span>
<a name="l01398"></a>01398     $this-&gt;assertEquals(3, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;parents()-&gt;size());
<a name="l01399"></a>01399     $this-&gt;assertEquals(<span class="stringliteral">&#39;root&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;parents(<span class="stringliteral">&#39;root&#39;</span>)-&gt;tag());
<a name="l01400"></a>01400   }
<a name="l01401"></a>01401   
<a name="l01402"></a><a class="code" href="class_query_path_test.html#a05dd8cc1755417f53ecbc0d9632f97f3">01402</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a05dd8cc1755417f53ecbc0d9632f97f3">testCloneAll</a>() {
<a name="l01403"></a>01403     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01404"></a>01404     
<a name="l01405"></a>01405     <span class="comment">// Shallow test</span>
<a name="l01406"></a>01406     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;unary&#39;</span>);
<a name="l01407"></a>01407     $one = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0);
<a name="l01408"></a>01408     $two = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;cloneAll()-&gt;get(0);
<a name="l01409"></a>01409     $this-&gt;assertTrue($one !== $two);
<a name="l01410"></a>01410     $this-&gt;assertEquals(<span class="stringliteral">&#39;unary&#39;</span>, $two-&gt;tagName);
<a name="l01411"></a>01411     
<a name="l01412"></a>01412     <span class="comment">// Deep test: make sure children are also cloned.</span>
<a name="l01413"></a>01413     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>);
<a name="l01414"></a>01414     $one = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;get(0);
<a name="l01415"></a>01415     $two = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;find(<span class="stringliteral">&#39;:root inner&#39;</span>)-&gt;cloneAll()-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;get(0);
<a name="l01416"></a>01416     $this-&gt;assertTrue($one !== $two);
<a name="l01417"></a>01417     $this-&gt;assertEquals(<span class="stringliteral">&#39;li&#39;</span>, $two-&gt;tagName);
<a name="l01418"></a>01418   }
<a name="l01419"></a>01419   
<a name="l01420"></a><a class="code" href="class_query_path_test.html#a2bcb198553c4c7a97c6a43d7c3659ce0">01420</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a2bcb198553c4c7a97c6a43d7c3659ce0">testBranch</a>() {
<a name="l01421"></a>01421     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="class_query_path.html#a5728576905f79bc6dfdfad6aad326aed" title="This is a stub HTML 4.01 document.">QueryPath::HTML_STUB</a>);
<a name="l01422"></a>01422     $branch = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;branch();
<a name="l01423"></a>01423     $branch-&gt;find(<span class="stringliteral">&#39;title&#39;</span>)-&gt;text(<span class="stringliteral">&#39;Title&#39;</span>);
<a name="l01424"></a>01424     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;find(<span class="stringliteral">&#39;body&#39;</span>)-&gt;text(<span class="stringliteral">&#39;This is the body&#39;</span>);
<a name="l01425"></a>01425     
<a name="l01426"></a>01426     $this-&gt;assertEquals(<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top()-&gt;find(<span class="stringliteral">&#39;title&#39;</span>)-&gt;text(), $branch-&gt;top()-&gt;find(<span class="stringliteral">&#39;title&#39;</span>)-&gt;text());
<a name="l01427"></a>01427     
<a name="l01428"></a>01428     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="class_query_path.html#a5728576905f79bc6dfdfad6aad326aed" title="This is a stub HTML 4.01 document.">QueryPath::HTML_STUB</a>);
<a name="l01429"></a>01429     $branch = $qp-&gt;branch(<span class="stringliteral">&#39;title&#39;</span>);
<a name="l01430"></a>01430     $branch-&gt;find(<span class="stringliteral">&#39;title&#39;</span>)-&gt;text(<span class="stringliteral">&#39;Title&#39;</span>);
<a name="l01431"></a>01431     $qp-&gt;find(<span class="stringliteral">&#39;body&#39;</span>)-&gt;text(<span class="stringliteral">&#39;This is the body&#39;</span>);
<a name="l01432"></a>01432     $this-&gt;assertEquals($qp-&gt;top()-&gt;find(<span class="stringliteral">&#39;title&#39;</span>)-&gt;text(), $branch-&gt;text());
<a name="l01433"></a>01433   }
<a name="l01434"></a>01434   
<a name="l01435"></a><a class="code" href="class_query_path_test.html#acd35ea63cd4d4fcdf9d57c21c0c8a9b8">01435</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#acd35ea63cd4d4fcdf9d57c21c0c8a9b8">testXpath</a>() {
<a name="l01436"></a>01436     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01437"></a>01437     
<a name="l01438"></a>01438     $this-&gt;assertEquals(<span class="stringliteral">&#39;head&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>)-&gt;xpath(<span class="stringliteral">&quot;//*[@id=&#39;head&#39;]&quot;</span>)-&gt;tag());
<a name="l01439"></a>01439   }
<a name="l01440"></a>01440     
<a name="l01441"></a><a class="code" href="class_query_path_test.html#ae71db8b624561a1b44b5098065a22969">01441</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ae71db8b624561a1b44b5098065a22969">test__clone</a>() {
<a name="l01442"></a>01442     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01443"></a>01443     
<a name="l01444"></a>01444     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner:first&#39;</span>);
<a name="l01445"></a>01445     $qp2 = clone <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>;
<a name="l01446"></a>01446     $this-&gt;assertFalse($qp === $qp2);
<a name="l01447"></a>01447     $qp2-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;attr(<span class="stringliteral">&#39;foo&#39;</span>, <span class="stringliteral">&#39;bar&#39;</span>);
<a name="l01448"></a>01448     $this-&gt;assertEquals(<span class="stringliteral">&#39;&#39;</span>, $qp-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;attr(<span class="stringliteral">&#39;foo&#39;</span>));
<a name="l01449"></a>01449     $this-&gt;assertEquals(<span class="stringliteral">&#39;bar&#39;</span>, $qp2-&gt;attr(<span class="stringliteral">&#39;foo&#39;</span>));
<a name="l01450"></a>01450   }
<a name="l01451"></a>01451   
<a name="l01452"></a><a class="code" href="class_query_path_test.html#acf6b81351f2f015957dd412dee01942f">01452</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#acf6b81351f2f015957dd412dee01942f">testStub</a>() {
<a name="l01453"></a>01453     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="class_query_path.html#a5728576905f79bc6dfdfad6aad326aed" title="This is a stub HTML 4.01 document.">QueryPath::HTML_STUB</a>)-&gt;find(<span class="stringliteral">&#39;title&#39;</span>)-&gt;size());
<a name="l01454"></a>01454   }
<a name="l01455"></a>01455   
<a name="l01456"></a><a class="code" href="class_query_path_test.html#aa8be46b4620f411ca3954527ebee0b4a">01456</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#aa8be46b4620f411ca3954527ebee0b4a">testIterator</a>() {
<a name="l01457"></a>01457     
<a name="l01458"></a>01458     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="class_query_path.html#a5728576905f79bc6dfdfad6aad326aed" title="This is a stub HTML 4.01 document.">QueryPath::HTML_STUB</a>, <span class="stringliteral">&#39;body&#39;</span>)-&gt;append(<span class="stringliteral">&#39;&lt;li/&gt;&lt;li/&gt;&lt;li/&gt;&lt;li/&gt;&#39;</span>);
<a name="l01459"></a>01459     
<a name="l01460"></a>01460     $this-&gt;assertEquals(4, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;size());
<a name="l01461"></a>01461     <a class="code" href="odt_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a> = 0;
<a name="l01462"></a>01462     <span class="keywordflow">foreach</span> (<a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> as $li) {
<a name="l01463"></a>01463       ++<a class="code" href="odt_8php.html#a83018d9153d17d91fbcf3bc10158d34f">$i</a>;
<a name="l01464"></a>01464       $li-&gt;text(<span class="stringliteral">&#39;foo&#39;</span>);
<a name="l01465"></a>01465     }
<a name="l01466"></a>01466     $this-&gt;assertEquals(4, $i);
<a name="l01467"></a>01467     $this-&gt;assertEquals(<span class="stringliteral">&#39;foofoofoofoo&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top()-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;text());
<a name="l01468"></a>01468   }
<a name="l01469"></a>01469   
<a name="l01470"></a><a class="code" href="class_query_path_test.html#ae07c1c62559f39f9e2a2795466e119a2">01470</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ae07c1c62559f39f9e2a2795466e119a2">testModeratelySizedDocument</a>() {
<a name="l01471"></a>01471     
<a name="l01472"></a>01472     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="_query_path_test_8php.html#a7398a01d613ef995beca17ea2e110316">MEDIUM_FILE</a>)-&gt;size());
<a name="l01473"></a>01473     
<a name="l01474"></a>01474     $contents = file_get_contents(<a class="code" href="_query_path_test_8php.html#a7398a01d613ef995beca17ea2e110316">MEDIUM_FILE</a>);
<a name="l01475"></a>01475     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($contents)-&gt;size());
<a name="l01476"></a>01476   }
<a name="l01477"></a>01477   <span class="comment"></span>
<a name="l01478"></a>01478 <span class="comment">  /**</span>
<a name="l01479"></a>01479 <span class="comment">   * @deprecated</span>
<a name="l01480"></a>01480 <span class="comment">   */</span>
<a name="l01481"></a><a class="code" href="class_query_path_test.html#ade9eccb9778164d441ecf212c8c032d6">01481</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ade9eccb9778164d441ecf212c8c032d6">testSize</a>() {
<a name="l01482"></a>01482     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01483"></a>01483     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>);
<a name="l01484"></a>01484     $this-&gt;assertEquals(5, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size());
<a name="l01485"></a>01485   }
<a name="l01486"></a>01486   
<a name="l01487"></a><a class="code" href="class_query_path_test.html#ac444346b03fc5be31a27ecfb506e3a3a">01487</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ac444346b03fc5be31a27ecfb506e3a3a">testCount</a>() {
<a name="l01488"></a>01488     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01489"></a>01489     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>);
<a name="l01490"></a>01490     $this-&gt;assertEquals(5, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;count());
<a name="l01491"></a>01491     
<a name="l01492"></a>01492     <span class="comment">// Test that this is exposed to PHP&#39;s Countable logic.</span>
<a name="l01493"></a>01493     $this-&gt;assertEquals(5, count(<a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)));
<a name="l01494"></a>01494     
<a name="l01495"></a>01495   }
<a name="l01496"></a>01496   
<a name="l01497"></a><a class="code" href="class_query_path_test.html#acde2f0d0f8901faf48d639cb460cd204">01497</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#acde2f0d0f8901faf48d639cb460cd204">testLength</a>() {
<a name="l01498"></a>01498     
<a name="l01499"></a>01499     <span class="comment">// Test that the length attribute works exactly the same as size.</span>
<a name="l01500"></a>01500     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01501"></a>01501     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>);
<a name="l01502"></a>01502     $this-&gt;assertEquals(5, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;length);
<a name="l01503"></a>01503     
<a name="l01504"></a>01504     
<a name="l01505"></a>01505   }
<a name="l01506"></a>01506   
<a name="l01507"></a><a class="code" href="class_query_path_test.html#ae7fdb4d9c36ddaf0465b831ad7c20e58">01507</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#ae7fdb4d9c36ddaf0465b831ad7c20e58">testDocument</a>() {
<a name="l01508"></a>01508     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01509"></a>01509     $doc1 = <span class="keyword">new</span> DOMDocument(<span class="stringliteral">&#39;1.0&#39;</span>);
<a name="l01510"></a>01510     $doc1-&gt;load(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>);
<a name="l01511"></a>01511     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($doc1);
<a name="l01512"></a>01512     
<a name="l01513"></a>01513     $this-&gt;assertEquals($doc1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;document());
<a name="l01514"></a>01514     
<a name="l01515"></a>01515     <span class="comment">// Ensure that adding to the DOMDocument is accessible to QP:</span>
<a name="l01516"></a>01516     $ele = $doc1-&gt;createElement(<span class="stringliteral">&#39;testDocument&#39;</span>);
<a name="l01517"></a>01517     $doc1-&gt;documentElement-&gt;appendChild($ele);
<a name="l01518"></a>01518     
<a name="l01519"></a>01519     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;find(<span class="stringliteral">&#39;testDocument&#39;</span>)-&gt;size());
<a name="l01520"></a>01520   }
<a name="l01521"></a>01521   
<a name="l01522"></a>01522   <span class="comment">/*</span>
<a name="l01523"></a>01523 <span class="comment">  public function test__get() {</span>
<a name="l01524"></a>01524 <span class="comment">    // Test that other properties are not interferred with by __get().</span>
<a name="l01525"></a>01525 <span class="comment">    $file = DATA_FILE;</span>
<a name="l01526"></a>01526 <span class="comment">    $options = array(&#39;QueryPath_class&#39; =&gt; &#39;QueryPathExtended&#39;);</span>
<a name="l01527"></a>01527 <span class="comment">    $foo = qp($file,&#39;li&#39;, $options)-&gt;foo;</span>
<a name="l01528"></a>01528 <span class="comment">    </span>
<a name="l01529"></a>01529 <span class="comment">    $this-&gt;assertEquals(&#39;bar&#39;, $foo);</span>
<a name="l01530"></a>01530 <span class="comment">  }</span>
<a name="l01531"></a>01531 <span class="comment">  */</span>
<a name="l01532"></a>01532   <span class="comment"></span>
<a name="l01533"></a>01533 <span class="comment">  /**</span>
<a name="l01534"></a>01534 <span class="comment">   * @  expectedException QueryPathException</span>
<a name="l01535"></a>01535 <span class="comment">   */</span>
<a name="l01536"></a>01536    <span class="comment">/*</span>
<a name="l01537"></a>01537 <span class="comment">  public function testFailed__get() {</span>
<a name="l01538"></a>01538 <span class="comment">    // This should generate an error because &#39;last&#39; is protected.</span>
<a name="l01539"></a>01539 <span class="comment">    qp(DATA_FILE)-&gt;last;</span>
<a name="l01540"></a>01540 <span class="comment">  }</span>
<a name="l01541"></a>01541 <span class="comment">  */</span>
<a name="l01542"></a>01542   
<a name="l01543"></a><a class="code" href="class_query_path_test.html#a7f074a5787bdc3d27ba923a387d42c21">01543</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a7f074a5787bdc3d27ba923a387d42c21" title="@ expectedException QueryPathException">testDetach</a>() {
<a name="l01544"></a>01544     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01545"></a>01545     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>);
<a name="l01546"></a>01546     $start = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size();
<a name="l01547"></a>01547     $finish = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;detach()-&gt;size();
<a name="l01548"></a>01548     $this-&gt;assertEquals($start, $finish);
<a name="l01549"></a>01549     $this-&gt;assertEquals(0, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;find(<span class="stringliteral">&#39;:root li&#39;</span>)-&gt;size());
<a name="l01550"></a>01550   }
<a name="l01551"></a>01551 
<a name="l01552"></a><a class="code" href="class_query_path_test.html#a7a3ffd6665d2202c63a3d76648a1383f">01552</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a7a3ffd6665d2202c63a3d76648a1383f">testAttach</a>() {
<a name="l01553"></a>01553     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01554"></a>01554     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>);
<a name="l01555"></a>01555     $start = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size();
<a name="l01556"></a>01556     $finish = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;detach()-&gt;size();
<a name="l01557"></a>01557     $dest = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;dest/&gt;&lt;/root&gt;&#39;</span>, <span class="stringliteral">&#39;dest&#39;</span>);
<a name="l01558"></a>01558     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;attach($dest);
<a name="l01559"></a>01559     $this-&gt;assertEquals(5, $dest-&gt;find(<span class="stringliteral">&#39;:root li&#39;</span>)-&gt;size());
<a name="l01560"></a>01560   }
<a name="l01561"></a>01561 
<a name="l01562"></a><a class="code" href="class_query_path_test.html#a25b20803a40d9b379c1af8bfd893c7c7">01562</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a25b20803a40d9b379c1af8bfd893c7c7">testEmptyElement</a>() {
<a name="l01563"></a>01563     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01564"></a>01564     $this-&gt;assertEquals(0, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-two&#39;</span>)-&gt;emptyElement()-&gt;find(<span class="stringliteral">&#39;li&#39;</span>)-&gt;size());
<a name="l01565"></a>01565     $this-&gt;assertEquals(<span class="stringliteral">&#39;&lt;inner id=&quot;inner-two&quot;/&gt;&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-two&#39;</span>)-&gt;emptyElement()-&gt;html());
<a name="l01566"></a>01566     
<a name="l01567"></a>01567     <span class="comment">// Make sure text children get wiped out, too.</span>
<a name="l01568"></a>01568     $this-&gt;assertEquals(<span class="stringliteral">&#39;&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;foot&#39;</span>)-&gt;emptyElement()-&gt;text());
<a name="l01569"></a>01569   }
<a name="l01570"></a>01570 
<a name="l01571"></a><a class="code" href="class_query_path_test.html#a0dd0b9b8c972b2d276597842d1ab656c">01571</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a0dd0b9b8c972b2d276597842d1ab656c">testHas</a>() {
<a name="l01572"></a>01572     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01573"></a>01573     
<a name="l01574"></a>01574     <span class="comment">// Test with DOMNode object</span>
<a name="l01575"></a>01575     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;foot&#39;</span>);
<a name="l01576"></a>01576     <a class="code" href="odt_8php.html#a0c200c557df0cfa8c68ae61039264631">$selector</a> = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;get(0);
<a name="l01577"></a>01577     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top(<span class="stringliteral">&#39;root&#39;</span>)-&gt;has(<a class="code" href="odt_8php.html#a0c200c557df0cfa8c68ae61039264631">$selector</a>);
<a name="l01578"></a>01578     
<a name="l01579"></a>01579     <span class="comment">// This should have one element named &#39;root&#39;.</span>
<a name="l01580"></a>01580     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;size(), <span class="stringliteral">&#39;One element is a parent of foot&#39;</span>);
<a name="l01581"></a>01581     $this-&gt;assertEquals(<span class="stringliteral">&#39;root&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;tag(), <span class="stringliteral">&#39;Root has foot.&#39;</span>);
<a name="l01582"></a>01582         
<a name="l01583"></a>01583     <span class="comment">// Test with CSS selector</span>
<a name="l01584"></a>01584     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;root&#39;</span>)-&gt;has(<span class="stringliteral">&#39;foot&#39;</span>);
<a name="l01585"></a>01585     
<a name="l01586"></a>01586     <span class="comment">// This should have one element named &#39;root&#39;.</span>
<a name="l01587"></a>01587     $this-&gt;assertEquals(1, $qp-&gt;size(), <span class="stringliteral">&#39;One element is a parent of foot&#39;</span>);
<a name="l01588"></a>01588     $this-&gt;assertEquals(<span class="stringliteral">&#39;root&#39;</span>, $qp-&gt;tag(), <span class="stringliteral">&#39;Root has foot.&#39;</span>);
<a name="l01589"></a>01589     
<a name="l01590"></a>01590     <span class="comment">// Test multiple matches.</span>
<a name="l01591"></a>01591     $qp = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#docRoot, #inner-two&#39;</span>)-&gt;has(<span class="stringliteral">&#39;#five&#39;</span>);
<a name="l01592"></a>01592     $this-&gt;assertEquals(2, $qp-&gt;size(), <span class="stringliteral">&#39;Two elements are parents of #five&#39;</span>);
<a name="l01593"></a>01593     $this-&gt;assertEquals(<span class="stringliteral">&#39;inner&#39;</span>, $qp-&gt;get(0)-&gt;tagName, <span class="stringliteral">&#39;Inner has li.&#39;</span>);
<a name="l01594"></a>01594     
<a name="l01595"></a>01595     <span class="comment">/*</span>
<a name="l01596"></a>01596 <span class="comment">    $this-&gt;assertEquals(qp($file, &#39;#one&#39;)-&gt;children()-&gt;get(), qp($file, &#39;#inner-one&#39;)-&gt;has($selector)-&gt;get(), &quot;Both should be empty/false&quot;);</span>
<a name="l01597"></a>01597 <span class="comment">    $qp = qp($file, &#39;root&#39;)-&gt;children(&quot;inner&quot;);</span>
<a name="l01598"></a>01598 <span class="comment">    $selector = qp($file, &#39;#two&#39;);</span>
<a name="l01599"></a>01599 <span class="comment">    $this-&gt;assertNotEquals(qp($file, &#39;#head&#39;), qp($file, &#39;#inner-one&#39;)-&gt;has($selector));</span>
<a name="l01600"></a>01600 <span class="comment">    $this-&gt;assertEquals(qp($file, &#39;root&#39;), qp($file, &#39;root&#39;)-&gt;has($selector), &quot;Should both have 1 element - root&quot;);</span>
<a name="l01601"></a>01601 <span class="comment">    */</span>
<a name="l01602"></a>01602   }
<a name="l01603"></a>01603 
<a name="l01604"></a><a class="code" href="class_query_path_test.html#a76299b5190269c3a33825fc024f8ad82">01604</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a76299b5190269c3a33825fc024f8ad82">testNextUntil</a>() {
<a name="l01605"></a>01605     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01606"></a>01606     $this-&gt;assertEquals(3, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#one&#39;</span>)-&gt;nextUntil()-&gt;size());
<a name="l01607"></a>01607     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;nextUntil(<span class="stringliteral">&#39;#three&#39;</span>)-&gt;size());
<a name="l01608"></a>01608   }
<a name="l01609"></a>01609 
<a name="l01610"></a><a class="code" href="class_query_path_test.html#a1a5df1f8f6863756445c2a0c3b37d946">01610</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a1a5df1f8f6863756445c2a0c3b37d946">testPrevUntil</a>() {
<a name="l01611"></a>01611     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01612"></a>01612     $this-&gt;assertEquals(3, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#four&#39;</span>)-&gt;prevUntil()-&gt;size());
<a name="l01613"></a>01613     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;foot&#39;</span>)-&gt;prevUntil(<span class="stringliteral">&#39;unary&#39;</span>)-&gt;size());
<a name="l01614"></a>01614   }
<a name="l01615"></a>01615 
<a name="l01616"></a><a class="code" href="class_query_path_test.html#a37bc9fa40abff99a7bd7366c2fc8d523">01616</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a37bc9fa40abff99a7bd7366c2fc8d523">testEven</a>() {
<a name="l01617"></a>01617     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01618"></a>01618     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;even()-&gt;size());
<a name="l01619"></a>01619     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;even()-&gt;size());
<a name="l01620"></a>01620   }
<a name="l01621"></a>01621   
<a name="l01622"></a><a class="code" href="class_query_path_test.html#a23ef1b116867950370aba939b3037c89">01622</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a23ef1b116867950370aba939b3037c89">testOdd</a>() {
<a name="l01623"></a>01623     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01624"></a>01624     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;odd()-&gt;size());
<a name="l01625"></a>01625     $this-&gt;assertEquals(3, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;odd()-&gt;size());
<a name="l01626"></a>01626   }
<a name="l01627"></a>01627   
<a name="l01628"></a><a class="code" href="class_query_path_test.html#add0b1ea90b8690dccd2af64da4736402">01628</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#add0b1ea90b8690dccd2af64da4736402">testFirst</a>() {
<a name="l01629"></a>01629     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01630"></a>01630     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;first()-&gt;size());
<a name="l01631"></a>01631     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;first()-&gt;size());
<a name="l01632"></a>01632     $this-&gt;assertEquals(<span class="stringliteral">&quot;Hello&quot;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;first()-&gt;text());
<a name="l01633"></a>01633   }
<a name="l01634"></a>01634   
<a name="l01635"></a><a class="code" href="class_query_path_test.html#a4a95818f7bc2e6b96cdf3d791362fbec">01635</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a4a95818f7bc2e6b96cdf3d791362fbec">testFirstChild</a>() {
<a name="l01636"></a>01636     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01637"></a>01637     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;firstChild()-&gt;size());
<a name="l01638"></a>01638     $this-&gt;assertEquals(<span class="stringliteral">&quot;Hello&quot;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;firstChild()-&gt;text());
<a name="l01639"></a>01639   }
<a name="l01640"></a>01640   
<a name="l01641"></a><a class="code" href="class_query_path_test.html#a2ce3be7ca5b96af1823f6e3865d53e3d">01641</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a2ce3be7ca5b96af1823f6e3865d53e3d">testLast</a>() {
<a name="l01642"></a>01642     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01643"></a>01643     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;inner&#39;</span>)-&gt;last()-&gt;size());
<a name="l01644"></a>01644     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;last()-&gt;size());
<a name="l01645"></a>01645     $this-&gt;assertEquals(<span class="stringliteral">&#39;&#39;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;last()-&gt;text());
<a name="l01646"></a>01646   }
<a name="l01647"></a>01647   
<a name="l01648"></a><a class="code" href="class_query_path_test.html#a683119d106a6232ec97e50b92df73e86">01648</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a683119d106a6232ec97e50b92df73e86">testLastChild</a>() {
<a name="l01649"></a>01649     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01650"></a>01650     $this-&gt;assertEquals(1, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;lastChild()-&gt;size());
<a name="l01651"></a>01651     $this-&gt;assertEquals(<span class="stringliteral">&quot;Last&quot;</span>, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;#inner-one&#39;</span>)-&gt;lastChild()-&gt;text());
<a name="l01652"></a>01652   }
<a name="l01653"></a>01653   
<a name="l01654"></a><a class="code" href="class_query_path_test.html#a94c547430aa1c204fc3f758eb004187e">01654</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a94c547430aa1c204fc3f758eb004187e">testParentsUntil</a>() {
<a name="l01655"></a>01655     <a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a> = <a class="code" href="_query_path_test_8php.html#a2f39b20613f9088c6368a76376776172">DATA_FILE</a>;
<a name="l01656"></a>01656 
<a name="l01657"></a>01657     <span class="comment">// Three: two inners and a root.</span>
<a name="l01658"></a>01658     $this-&gt;assertEquals(3, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;parentsUntil()-&gt;size());
<a name="l01659"></a>01659     $this-&gt;assertEquals(2, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>(<a class="code" href="odt_8php.html#aa1bfbd27060176201b271918dff57e8f" title="Using QueryPath to parse an Open Document Type (ODT) text file.">$file</a>, <span class="stringliteral">&#39;li&#39;</span>)-&gt;parentsUntil(<span class="stringliteral">&#39;root&#39;</span>)-&gt;size());
<a name="l01660"></a>01660   }
<a name="l01661"></a>01661   <span class="comment"></span>
<a name="l01662"></a>01662 <span class="comment">  /**</span>
<a name="l01663"></a>01663 <span class="comment">   * Regression test for issue #14.</span>
<a name="l01664"></a>01664 <span class="comment">   */</span>
<a name="l01665"></a><a class="code" href="class_query_path_test.html#af412fce2b3bd246da02da689c7ce2802">01665</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#af412fce2b3bd246da02da689c7ce2802" title="Regression test for issue #14.">testRegressionFindOptimizations</a>() {
<a name="l01666"></a>01666     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;</span>
<a name="l01667"></a>01667 <span class="stringliteral">      &lt;item id=&quot;outside&quot;&gt;</span>
<a name="l01668"></a>01668 <span class="stringliteral">        &lt;item&gt;</span>
<a name="l01669"></a>01669 <span class="stringliteral">          &lt;item id=&quot;inside&quot;&gt;Test&lt;/item&gt;</span>
<a name="l01670"></a>01670 <span class="stringliteral">        &lt;/item&gt;</span>
<a name="l01671"></a>01671 <span class="stringliteral">      &lt;/item&gt;</span>
<a name="l01672"></a>01672 <span class="stringliteral">    &lt;/root&gt;&#39;</span>;
<a name="l01673"></a>01673     
<a name="l01674"></a>01674     <span class="comment">// From inside, should not be able to find outside.</span>
<a name="l01675"></a>01675     $this-&gt;assertEquals(0, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;#inside&#39;</span>)-&gt;find(<span class="stringliteral">&#39;#outside&#39;</span>)-&gt;size());
<a name="l01676"></a>01676     
<a name="l01677"></a>01677     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;</span>
<a name="l01678"></a>01678 <span class="stringliteral">      &lt;item class=&quot;outside&quot;&gt;</span>
<a name="l01679"></a>01679 <span class="stringliteral">        &lt;item&gt;</span>
<a name="l01680"></a>01680 <span class="stringliteral">          &lt;item class=&quot;inside&quot;&gt;Test&lt;/item&gt;</span>
<a name="l01681"></a>01681 <span class="stringliteral">        &lt;/item&gt;</span>
<a name="l01682"></a>01682 <span class="stringliteral">      &lt;/item&gt;</span>
<a name="l01683"></a>01683 <span class="stringliteral">    &lt;/root&gt;&#39;</span>;
<a name="l01684"></a>01684     <span class="comment">// From inside, should not be able to find outside.</span>
<a name="l01685"></a>01685     $this-&gt;assertEquals(0, <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;.inside&#39;</span>)-&gt;find(<span class="stringliteral">&#39;.outside&#39;</span>)-&gt;size());
<a name="l01686"></a>01686   }
<a name="l01687"></a>01687   
<a name="l01688"></a><a class="code" href="class_query_path_test.html#a3e092329c0c5f6b9ff0e4a528faac1fa">01688</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a3e092329c0c5f6b9ff0e4a528faac1fa">testDataURL</a>() {
<a name="l01689"></a>01689     
<a name="l01690"></a>01690     $text = <span class="stringliteral">&#39;Hi!&#39;</span>; <span class="comment">// Base-64 encoded value would be SGkh</span>
<a name="l01691"></a>01691     $xml = <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;&lt;item/&gt;&lt;/root&gt;&#39;</span>;
<a name="l01692"></a>01692     
<a name="l01693"></a>01693     <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a> = <a class="code" href="group__querypath__core.html#gaef0367b722980142efd304a5ed41fb15" title="The CssEventHandler interfaces with the CSS parser.">qp</a>($xml, <span class="stringliteral">&#39;item&#39;</span>)-&gt;dataURL(<span class="stringliteral">&#39;secret&#39;</span>, $text, <span class="stringliteral">&#39;text/plain&#39;</span>);
<a name="l01694"></a>01694     
<a name="l01695"></a>01695     $this-&gt;assertEquals(1, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;top(<span class="stringliteral">&#39;item[secret]&#39;</span>)-&gt;size(), <span class="stringliteral">&#39;One attr should be added.&#39;</span>);
<a name="l01696"></a>01696     
<a name="l01697"></a>01697     $this-&gt;assertEquals(<span class="stringliteral">&#39;data:text/plain;base64,SGkh&#39;</span>, <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;attr(<span class="stringliteral">&#39;secret&#39;</span>), <span class="stringliteral">&#39;Attr value should be data URL.&#39;</span>);
<a name="l01698"></a>01698     
<a name="l01699"></a>01699     $result = <a class="code" href="database__import_8php.html#a1d7cd8645d74bb052d9670d3ea7cbfae">$qp</a>-&gt;dataURL(<span class="stringliteral">&#39;secret&#39;</span>);
<a name="l01700"></a>01700     $this-&gt;assertEquals(2, count($result), <span class="stringliteral">&#39;Should return two-array.&#39;</span>);
<a name="l01701"></a>01701     $this-&gt;assertEquals($text, $result[<span class="stringliteral">&#39;data&#39;</span>] , <span class="stringliteral">&#39;Should return original data, decoded.&#39;</span>);
<a name="l01702"></a>01702     $this-&gt;assertEquals(<span class="stringliteral">&#39;text/plain&#39;</span>, $result[<span class="stringliteral">&#39;mime&#39;</span>], <span class="stringliteral">&#39;Should return the original MIME&#39;</span>);
<a name="l01703"></a>01703   }
<a name="l01704"></a>01704   
<a name="l01705"></a><a class="code" href="class_query_path_test.html#a4848ae14c94508b8577b8cbc9b1024e2">01705</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_test.html#a4848ae14c94508b8577b8cbc9b1024e2">testEncodeDataURL</a>() {
<a name="l01706"></a>01706     <a class="code" href="docx_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a> = <a class="code" href="class_query_path.html#a00d13137d69f65a39d52f26ddfd4cb79" title="A static function for transforming data into a Data URL.">QueryPath::encodeDataURL</a>(<span class="stringliteral">&#39;Hi!&#39;</span>, <span class="stringliteral">&#39;text/plain&#39;</span>);
<a name="l01707"></a>01707     $this-&gt;assertEquals(<span class="stringliteral">&#39;data:text/plain;base64,SGkh&#39;</span>, <a class="code" href="docx_8php.html#a6efc15b5a2314dd4b5aaa556a375c6d6">$data</a>);
<a name="l01708"></a>01708   }
<a name="l01709"></a>01709 }
<a name="l01710"></a>01710 <span class="comment"></span>
<a name="l01711"></a>01711 <span class="comment">/**</span>
<a name="l01712"></a>01712 <span class="comment"> * Test the XMLish functions of QueryPath.</span>
<a name="l01713"></a>01713 <span class="comment"> *</span>
<a name="l01714"></a>01714 <span class="comment"> * This uses a testing harness, XMLishMock, to test</span>
<a name="l01715"></a>01715 <span class="comment"> * a protected method of QueryPath.</span>
<a name="l01716"></a>01716 <span class="comment"> *</span>
<a name="l01717"></a>01717 <span class="comment"> * @ingroup querypath_test</span>
<a name="l01718"></a>01718 <span class="comment"> */</span>
<a name="l01719"></a><a class="code" href="class_x_m_lish_test.html">01719</a> <span class="keyword">class </span><a class="code" href="class_x_m_lish_test.html" title="Test the XMLish functions of QueryPath.">XMLishTest</a> <span class="keyword">extends</span> PHPUnit_Framework_TestCase {
<a name="l01720"></a><a class="code" href="class_x_m_lish_test.html#abbbcdee11a638de02ba156c378c9ec9f">01720</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_x_m_lish_test.html#abbbcdee11a638de02ba156c378c9ec9f">testXMLishMock</a>() {
<a name="l01721"></a>01721     $tests = array(
<a name="l01722"></a>01722       <span class="stringliteral">&#39;this/is/a/path&#39;</span> =&gt; FALSE,
<a name="l01723"></a>01723       <span class="stringliteral">&quot;this is just some plain\ntext with a line break.&quot;</span> =&gt; FALSE,
<a name="l01724"></a>01724       <span class="stringliteral">&#39;2 &gt; 1&#39;</span> =&gt; FALSE,
<a name="l01725"></a>01725       <span class="stringliteral">&#39;1 &lt; 2&#39;</span> =&gt; FALSE,
<a name="l01726"></a>01726       <span class="comment">//&#39;1 &lt; 2 &gt; 1&#39; =&gt; FALSE,</span>
<a name="l01727"></a>01727       <span class="stringliteral">&#39;&lt;html/&gt;&#39;</span> =&gt; TRUE,
<a name="l01728"></a>01728       <span class="stringliteral">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root/&gt;&#39;</span> =&gt; TRUE,
<a name="l01729"></a>01729       <span class="stringliteral">&#39;&lt;tag/&gt;&lt;tag/&gt;&lt;tag/&gt;&#39;</span> =&gt; TRUE, <span class="comment">// It&#39;s not valid, but HTML parser will try it.</span>
<a name="l01730"></a>01730     );
<a name="l01731"></a>01731     <span class="keywordflow">foreach</span> ($tests as $test =&gt; $correct) {
<a name="l01732"></a>01732       $mock = <span class="keyword">new</span> <a class="code" href="class_x_m_lish_mock.html" title="A testing class for XMLish tests.">XMLishMock</a>();
<a name="l01733"></a>01733       $this-&gt;assertEquals($correct, $mock-&gt;exposedIsXMLish($test), <span class="stringliteral">&quot;Testing $test&quot;</span>);
<a name="l01734"></a>01734     }
<a name="l01735"></a>01735   }
<a name="l01736"></a>01736   
<a name="l01737"></a><a class="code" href="class_x_m_lish_test.html#ac17dfbfd208d0bfccee36c98812260e0">01737</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_x_m_lish_test.html#ac17dfbfd208d0bfccee36c98812260e0">testXMLishWithBrokenHTML</a>() {
<a name="l01738"></a>01738     $html = <span class="stringliteral">&#39;&lt;div id=&quot;qp-top&quot;&gt;&lt;div class=header&gt;Abe H. Rosenbloom Field&lt;br&gt;&lt;/div&gt; &lt;p&gt; Located in a natural bowl north of 10th Avenue, Rosenbloom Field was made possible by a gift from Virginia Whitney Rosenbloom \&#39;36 and Abe H. Rosenbloom \&#39;34. The Pioneers observed the occasion of the field\&#39;s dedication on Oct. 4, 1975, by defeating Carleton 36-26. Rosenbloom Field has a seating capacity of 1,500. &lt;br&gt; &lt;br&gt; A former member of the Grinnell Advisory Board and other college committees, Abe Rosenbloom played football at Grinnell from 1931 to 1933. He played guard and was one of the Missouri Valley Conference\&#39;s smallest gridders (5\&#39;6&quot; and 170 pounds). He averaged more than 45 minutes a game playing time during a 24-game varsity career and was named to the Des Moines Register\&#39;s all-Missouri Valley Conference squad in 1932 and 1933. &lt;br&gt; &lt;br&gt; On the south side of the field, a memorial recalls the 100th anniversary of the first intercollegiate football game played west of the Mississippi. The game took place on the Grinnell campus on Nov. 16, 1889. On the north side, a marker commemorates the first 50 years of football in the west, and recalls the same game, played in 1889, Grinnell College vs. the University of Iowa. Grinnell won, 24-0. &lt;/p&gt;&lt;/div&gt;&#39;</span>;
<a name="l01739"></a>01739     $mock = <span class="keyword">new</span> <a class="code" href="class_x_m_lish_mock.html" title="A testing class for XMLish tests.">XMLishMock</a>();
<a name="l01740"></a>01740     $this-&gt;assertEquals(TRUE, $mock-&gt;exposedIsXMLish($html), <span class="stringliteral">&quot;Testing broken HTML&quot;</span>);
<a name="l01741"></a>01741   }
<a name="l01742"></a>01742 
<a name="l01743"></a>01743 }
<a name="l01744"></a>01744 <span class="comment"></span>
<a name="l01745"></a>01745 <span class="comment">/**</span>
<a name="l01746"></a>01746 <span class="comment"> * A testing class for XMLish tests.</span>
<a name="l01747"></a>01747 <span class="comment"> *</span>
<a name="l01748"></a>01748 <span class="comment"> * @ingroup querypath_tests</span>
<a name="l01749"></a>01749 <span class="comment"> */</span>
<a name="l01750"></a><a class="code" href="class_x_m_lish_mock.html">01750</a> <span class="keyword">class </span><a class="code" href="class_x_m_lish_mock.html" title="A testing class for XMLish tests.">XMLishMock</a> <span class="keyword">extends</span> <a class="code" href="class_query_path.html" title="The Query Path object is the primary tool in this library.">QueryPath</a> {
<a name="l01751"></a><a class="code" href="class_x_m_lish_mock.html#ab4b6b7d8eeb332b93b866afd5357a3e9">01751</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_x_m_lish_mock.html#ab4b6b7d8eeb332b93b866afd5357a3e9">exposedIsXMLish</a>(<a class="code" href="test_8php.html#a7542d95618011800c61773127fa625cf">$str</a>) {
<a name="l01752"></a>01752     <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_query_path.html#afeabc1d00371c83e865defccb1bcc58f" title="Determine whether a given string looks like XML or not.">isXMLish</a>(<a class="code" href="test_8php.html#a7542d95618011800c61773127fa625cf">$str</a>);
<a name="l01753"></a>01753   }
<a name="l01754"></a>01754 }
<a name="l01755"></a>01755 <span class="comment"></span>
<a name="l01756"></a>01756 <span class="comment">/**</span>
<a name="l01757"></a>01757 <span class="comment"> * A simple mock for testing qp()&#39;s abstract factory.</span>
<a name="l01758"></a>01758 <span class="comment"> *</span>
<a name="l01759"></a>01759 <span class="comment"> * @ingroup querypath_tests</span>
<a name="l01760"></a>01760 <span class="comment"> */</span>
<a name="l01761"></a><a class="code" href="class_query_path_extended.html">01761</a> <span class="keyword">class </span><a class="code" href="class_query_path_extended.html" title="A simple mock for testing qp()&#39;s abstract factory.">QueryPathExtended</a> <span class="keyword">extends</span> <a class="code" href="class_query_path.html" title="The Query Path object is the primary tool in this library.">QueryPath</a> {
<a name="l01762"></a><a class="code" href="class_query_path_extended.html#a7a1efa8a0f6183fb3a5e8e8b0696526c">01762</a>   <span class="keyword">public</span> <a class="code" href="class_query_path_extended.html#a7a1efa8a0f6183fb3a5e8e8b0696526c">$foo</a> = <span class="stringliteral">&#39;bar&#39;</span>;
<a name="l01763"></a><a class="code" href="class_query_path_extended.html#a73a55c5681423ef3e8d7dde18da6843a">01763</a>   <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_query_path_extended.html#a73a55c5681423ef3e8d7dde18da6843a">foonator</a>() {
<a name="l01764"></a>01764     <span class="keywordflow">return</span> TRUE;
<a name="l01765"></a>01765   }
<a name="l01766"></a>01766 }
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_query_path_test_8php.html">QueryPathTest.php</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Fri Feb 3 2012 17:38:42 for QueryPath by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
